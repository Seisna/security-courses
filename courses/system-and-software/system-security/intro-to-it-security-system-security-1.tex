\documentclass[Screen16to9,17pt]{foils}
\usepackage{kea-slides}
\externaldocument{build/intro-to-it-security-system-security-exercises}
\selectlanguage{english}

\begin{document}

\mytitlepage
{Systems Security - 1}
{Intro to IT-security \the\year}

\hlkprofiluk


\slide{Goals for part I}

\hlkimage{6cm}{thomas-galler-hZ3uF1-z2Qc-unsplash.jpg}

\begin{list2}
\item Prepare Virtual Machines
\item Prepare tools for the exercises
\item Learn to find resources, files and programs/libraries
\item Concrete Expectations
\end{list2}

Exercises
\begin{list2}
\item Debian Linux exercises {\small\hfill{\small\hfill  Photo by Thomas Galler on Unsplash}}
\end{list2}



\slide{Plan and Time Schedule}

System security
\begin{list2}
\item Day 1: User accounts, authentication, athorization
\item Day 2: Access Control Lists, Confinement and isolation
\item Day 3: Benchmarking and Auditing
\item Day 4: Work on mandatory
\item Day 2: Present mandatory -- as many as possible
\vskip 5mm
\item We aim at maximum of 45min of lecture without breaks.
\item There may be times where 45min lecture is followed by exercises. You can get started immediately or take a break.
\end{list2}

\vskip 5mm
\centerline{This will be the basic plan for each day}

\slide{Course Materials}

\begin{list1}
\item This material is in multiple parts:
\begin{list2}
%\item Introduktionsmateriale med baggrundsinformation
\item Slide shows - presentation - this file
\item Exercises - PDF which is updated along the way
\end{list2}
\item Additional resources from the internet
\end{list1}




\slide{Goals: System Security}

\hlkimage{10cm}{alexander-schimmeck-SeeM4AnkEHE-unsplash.jpg}

\begin{list1}
\item System security - because we have some common security subjects across our environments
\end{list1}


\slide{Plan for system security in this course}

\hlkimage{4cm}{Blob.jpg}
Picture from the OpenBSD project, software blobs

\begin{list2}
\item Get started looking at this big subject
\item 5 days with mix of teaching and doing exercises
\item Last day dedicated to you presenting a mandatory
\end{list2}

\slide{Working in groups}

\hlkimage{7cm}{Shaking-hands_web.jpg}

Form groups of 2-3 students

In groups of 2 students, we will do exercises. It is enough with one virtual machine per group

\vskip 1cm
PS We will from time to time have exercises, groups dont need to be the same each time.




\slide{What is Infrastructure}


\hlkimage{10cm}{alexander-schimmeck-SeeM4AnkEHE-unsplash.jpg}

\begin{list2}
\item Enterprises today have a lot of computing systems supporting the business needs
\item These are very diverse and often discrete systems
\end{list2}

\hfill Photo by Alexander Schimmeck on Unsplash


\slide{Business Challenges}

\hlkimage{7cm}{adam-bignell-9tI2z5VZIZg-unsplash.jpg}

\begin{list2}
\item Accumulation of software
\item Legacy systems
\item Partners
\item Various types of data
\item Employee churn, replacement \hfill Photo by Adam Bignell on Unsplash
\end{list2}



\slide{Software Challenges}

\hlkimage{7cm}{john-barkiple-l090uFWoPaI-unsplash.jpg}

\begin{list2}
\item Complexity
\item Various languages
\item Various programming paradigms, client server, monolith, Model View Controller
\item Conflicting data types and available structures
\item Steam train vs electric train \hfill Photo by John Barkiple on Unsplash

\end{list2}




\slide{Developers Challenges}

\hlkimage{10cm}{kelly-sikkema-YK0HPwWDJ1I-unsplash.jpg}

\begin{list2}
\item Work in teams across organisation - and partners, vendors, sub-contractors
\item Work with legacy systems, old technology
\item Learn new Technologies \hfill Photo by Kelly Sikkema on Unsplash
\end{list2}




\slide{Integration Challenges}

% hands

\hlkimage{10cm}{thomas-drouault-IBUcu_9vXJc-unsplash.jpg}

\begin{list2}
\item Enable communication between components
\item Need mediator, interpreter, translator
\item Recognize standard patterns \hfill Photo by Thomas Drouault on Unsplash
\end{list2}


\slide{Supporting literature books}
\begin{list2}
\item \emph{The Linux Command Line: A Complete Introduction}, 2nd Edition\\
 by William Shotts
\item \emph{Linux Basics for Hackers Getting Started with Networking, Scripting, and Security in Kali}\\
OccupyTheWeb, December 2018, 248 pp. ISBN-13: 978-1-59327-855-7 - shortened LBfH
\item \emph{The Debian Administrator’s Handbook}, Raphaël Hertzog and Roland Mas\\
\url{https://debian-handbook.info/} - shortened DEB
\item \emph{Kali Linux Revealed  Mastering the Penetration Testing Distribution}\\
Raphaël Hertzog, Jim O'Gorman - shortened KLR
\end{list2}




\slide{Book: The Linux Command Line}

\hlkimage{4cm}{lcl2_front_new.png}

\emph{The Linux Command Line: A Complete Introduction }, 2nd Edition
by William Shotts

Print: \link{https://nostarch.com/tlcl2}\\
Download -- internet edition \link{https://sourceforge.net/projects/linuxcommand}


Not curriculum but explains how to use Linux


\slide{ The Debian Administrator’s Handbook (DEB)}

\hlkimage{6cm}{book-debian-administrators-handbook.jpg}

\emph{The Debian Administrator’s Handbook}, Raphaël Hertzog and Roland Mas\\
\url{https://debian-handbook.info/} - shortened DEB

Not curriculum but explains how to use Debian Linux




\slide{Hackerlab Setup}

\hlkimage{6cm}{hacklab-1.png}

\begin{list2}
\item Hardware: modern laptop CPU with virtualisation\\
Dont forget to enable hardware virtualisation in the BIOS
\item Virtualisation software: VMware, Virtual box, HyperV pick your poison
\item Hackersoftware: Kali Virtual Machine amd64 64-bit \link{https://www.kali.org/}
\item Linux server system: Debian 12 Bookworm amd64 64-bit \link{https://www.debian.org/}
\item Setup instructions can be found at \link{https://github.com/kramse/kramse-labs}
\end{list2}

\centerline{It is enough if these VMs are pr team}

\slide{Mixed exercises}
Then we will do a mixed bag of exercises to introduce technologies, find your current knowledge level with regards to:

\begin{list2}
\item Linux as an operating system -- user database in /etc/
\item Linux command line
\item Demo: Ansible
\item Git, Python, scripting
\item Demo: Elasticsearch -- how to run a \emph{service}
\end{list2}

{\bf Note: today we will consider all these optional, we won't be able to do them all}

Later we will return to them!

\slide{Aftale om test af netværk}

\vskip 1cm
{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} lavet af Det
  Kriminalpræventive Råd
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}


\slide{Exercise CHAOS: Don't Panic -- have fun learning}

\hlkimage{6cm}{dont-panic.png}

\begin{quote}
“It is said that despite its many glaring (and occasionally fatal) inaccuracies, the Hitchhiker’s Guide to the Galaxy itself has outsold the Encyclopedia Galactica because it is slightly cheaper, and because it has the words ‘DON’T PANIC’ in large, friendly letters on the cover.”
\end{quote}
Hitchhiker’s Guide to the Galaxy, Douglas Adams


\slide{Your lab setup}

\begin{list2}
\item Go to GitHub, Find user Kramse, click through security-courses, find the software-security folder\\
\link{https://github.com/kramse/security-courses/tree/master/courses/system-and-software/software-security}
\item Look into the files named: \verb+intro-to-it-security-week-7.pdf+, \verb+intro-to-it-security-week-8.pdf+ and \verb+intro-to-it-security-exercises.pdf+
\item Install Docker on a laptop in your team -- you might already have it
\end{list2}

Hint: If you have a Debian virtual machine you can install the docker software as a package using the Ansible tool, by checking out a repo \verb+kramse-labs+ and running Ansible:
\begin{alltt}
sudo apt install ansible git
git clone https://github.com/kramse/kramse-labs.git
cd docker-install
ansible-playbook -v 1-dependencies.yml
\end{alltt}


\slide{Why introduce Git and Github?}

We introduce Git here also because Github, one of the most popular places to store Git repositories has added security tools which you can use.

An example of a security feature at Github is the use of dependencies, when a project is stored on Github they can scan for outdated dependencies which have security issues.

You can read more about the features available, and some common problems in software in their article:
\emph{How GitHub secures open source software}
Feb 23, 2021 // 10 min read\\
\link{https://resources.github.com/security/open-source/how-github-secures-open-source-software/}



\slide{Command prompts in Unix}

\begin{list1}
\item Shells :
  \begin{list2}
    \item sh - Bourne Shell
\item bash - Bourne Again Shell, often the default in Linux
\item ksh - Korn shell, original by David Korn, but often the public domain version used
\item csh - C shell, syntax similar to C language
\item Multiple others available, zsh is very popular
  \end{list2}
\item Windows have \verb+command.com+, \verb+cmd.exe+ but PowerShell is more similar to the Unix shells
\item Used for scripting, automation and programs
\end{list1}



\slide{Command prompts}


\begin{alltt}
\small
[hlk@fischer hlk]$ id
uid=6000(hlk) gid=20(staff) groups=20(staff),
0(wheel), 80(admin), 160(cvs)
[hlk@fischer hlk]$ sudo -s
[root@fischer hlk]#
[root@fischer hlk]# id {\bf
uid=0(root) gid=0(wheel)} groups=0(wheel), 1(daemon),
20(staff), 80(admin)
[root@fischer hlk]#
\end{alltt}

Note the difference between running as root and normal user. Usually books and instructions will use a prompt of hash mark \verb+#+ when the root user is assumed and dollar sign \verb+$+ when a normal user prompt.

\slide{Command syntax}


\begin{alltt}
echo [-n] [string ...]
\end{alltt}

\begin{list1}
\item Commands are written like this:
\begin{list2}
\item Always begin with the command to execute, like \verb+echo+ above
\item Options typically short form with single dash \verb+-n+
\item or long options \verb+--version+
\item Some commands allow grouing options, \verb+tar -c -v -f+ becomes \verb+tar -cvf+\\
NOTE: some options require parameters, so \verb+tar -c -f filename.tar+ not equal to \verb+tar -fc filename.tar+
\item Optional options are in brackets \verb+[ ]+
\item Output can be saved using redirection, into new file/overwrite \verb+echo hello > file.txt+ or append \verb+echo hello >> file.txt+
\item Read from files \verb+wc -l file.txt+ or pipe output into input \verb+cat file.txt | wc -l+\\
\verb+wc+ is word count, and option l is count lines
\end{list2}
\end{list1}



\slide{Unix Manual system}

\hlkimage{7cm}{images/Unix-command-1.pdf}

\begin{quote}
 It is a book about a Spanish guy called Manual. You should read it.
       -- Dilbert
\end{quote}

\begin{list1}
\item Manual system in Unix is always there!
\item Key word search \verb+man -k+ see also \verb+apropos+
\item Different sections, can be chosen
\end{list1}

See \verb+man crontab+ the command vs the file format in section 5 \verb+man 5 crontab+



\slide{A manual page}

\begin{alltt}\footnotesize
\small
NAME
     cal - displays a calendar
SYNOPSIS
     cal [-jy] [[month]  year]
DESCRIPTION
   cal displays a simple calendar.  If arguments are not specified, the cur-
   rent month is displayed.  The options are as follows:
   -j      Display julian dates (days one-based, numbered from January 1).
   -y      Display a calendar for the current year.

The Gregorian Reformation is assumed to have occurred in 1752 on the 3rd
of September.  By this time, most countries had recognized the reforma-
tion (although a few did not recognize it until the early 1900's.)  Ten
days following that date were eliminated by the reformation, so the cal-
endar for that month is a bit unusual.
\end{alltt}

\slide{The year 1752}

\begin{alltt}\footnotesize
  user@Projects:$ cal 1752
...
         April                  May                   June
  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
            1  2  3  4                  1  2      1  2  3  4  5  6
   5  6  7  8  9 10 11   3  4  5  6  7  8  9   7  8  9 10 11 12 13
  12 13 14 15 16 17 18  10 11 12 13 14 15 16  14 15 16 17 18 19 20
  19 20 21 22 23 24 25  17 18 19 20 21 22 23  21 22 23 24 25 26 27
  26 27 28 29 30        24 25 26 27 28 29 30  28 29 30
                        31
          July                 August              September
  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
            1  2  3  4                     1  {\bf        1  2 14 15 16}
   5  6  7  8  9 10 11   2  3  4  5  6  7  8  17 18 19 20 21 22 23
  12 13 14 15 16 17 18   9 10 11 12 13 14 15  24 25 26 27 28 29 30
  19 20 21 22 23 24 25  16 17 18 19 20 21 22
  26 27 28 29 30 31     23 24 25 26 27 28 29
                        30 31
...
\end{alltt}


\slide{Linux configuration in /etc}

.
\hlkrightpic{8cm}{0cm}{Unix-vfs.pdf}
\begin{list2}
\item Command line is a requirement in the \emph{studieordningen} \smiley
\item Linux and Unix uses a single virtual file system\\
\url{https://en.wikipedia.org/wiki/Unix_filesystem}
\item No drive letters like the ones in MS-DOS and Microsoft Windows
\item Everything starts at the root of the file system tree \verb+/+ - NOTE: \emph{forward slash}
\item One special directory is \verb+/etc/+ and sub directories which usually contain a lot of configuration files
\end{list2}

\slide{Installing software in Debian -- apt}

%\hlkimage{}{}

\begin{alltt}\footnotesize
DESCRIPTION
apt provides a high-level commandline interface for the package management system. It is intended as an end user interface
and enables some options better suited for interactive usage by default compared to more specialized APT tools like apt-get(8)
and apt-cache(8).

update (apt-get(8))
  update is used to download package information from all configured sources. Other commands operate on this data to e.g.
  perform package upgrades or search in and display details about all packages available for installation.

upgrade (apt-get(8))
  upgrade is used to install available upgrades of all packages currently installed on the system from the sources configured
  via sources.list(5). New packages will be installed if required to satisfy dependencies, but existing packages will never
  be removed. If an upgrade for a package requires the removal of an installed package the upgrade for this package isn't performed.

full-upgrade (apt-get(8))
  full-upgrade performs the function of upgrade but will remove currently installed packages if this is needed to upgrade the
  system as a whole.
\end{alltt}

\begin{list2}
  \item Install a program using apt, for example \verb+apt install nmap+
\end{list2}


\slide{Ansible}

\hlkimage{2cm}{Ansible_logo.png}

\begin{quote}
From my course materials:\\
Ansible is great for automating stuff, so by running the playbooks we can get a whole lot of programs installed, files modified - avoiding the Vi editor.
\end{quote}

\begin{list2}
\item Easy to read, even if you don't know much about YAML
\item \link{https://www.ansible.com/} and \link{https://en.wikipedia.org/wiki/Ansible_(software)}
\item Great documentation\\
 \link{https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_module.html}
\end{list2}


\slide{Ansible Dependencies}

\hlkimage{10cm}{python-logo.png}

\begin{list2}
\item Ansible based on Python, only need Python installed\\
\link{https://www.python.org/}
\item Often you use Secure Shell for connecting to servers\\
\link{https://www.openssh.com/}
\item Easy to configure SSH keys, for secure connections
\end{list2}


\slide{Ansible playbooks}

Example playbook content, installing software using APT:
\begin{alltt}\small
apt:
    name: "\{\{ packages \}\}"
    vars:
      packages:
        - nmap
        - curl
        - iperf
        ...
\end{alltt}

Running it:
\begin{minted}[fontsize=\small]{shell}
cd kramse-labs/suricatazeek
ansible-playbook -v 1-dependencies.yml 2-suricatazeek.yml 3-elasticstack.yml 4-configuration.yml
\end{minted}

"YAML (a recursive acronym for "YAML Ain't Markup Language") is a human-readable data-serialization language."\\
\link{https://en.wikipedia.org/wiki/YAML}

\slide{Python and YAML -- Git}

\hlkimage{7cm}{git-logo.png}

\begin{list2}
\item We need to store configurations
\item Run playbooks
\item Problem: Remember what we did, when, how
\item Solution: use git for the playbooks
\item Not the only version control system, but my preferred one
\end{list2}

\slide{Alternative}

\hlkimage{10cm}{manual-install-es.png}

My playbooks allow installation of a whole Elastic stack in less then 10 minutes,

compare to:\\
\emph{Getting started with the Elastic Stack}\\
{\footnotesize\link{https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-elastic-stack.html}}


\slide{Git getting started}

{\bf Hints:}\\
Browse the Git tutorials on \link{https://git-scm.com/docs/gittutorial}\\
and \link{https://guides.github.com/activities/hello-world/}

\begin{list2}
\item What is git
\item Terminology
\end{list2}

Note: you don't need an account on Github to download/clone repositories, but having an acccount allows you to save repositories yourself and is recommended.

\slide{Demo: Ansible, Python, Git!}

\begin{quote}
  Running Git will allow you to clone repositories from others easily. This is a great way to get new software packages, and share your own.

  Git is the name of the tool, and Github is a popular site for hosting git repositories.
\end{quote}


\begin{list2}
\item Go to \link{https://github.com/kramse/kramse-labs}
\item Lets explore while we talk
\end{list2}


\slide{Demo: output from running a git clone}

\begin{alltt}\footnotesize
user@Projects:tt$ {\bf git clone https://github.com/kramse/kramse-labs.git}
Cloning into 'kramse-labs'...
remote: Enumerating objects: 283, done.
remote: Total 283 (delta 0), reused 0 (delta 0), pack-reused 283
Receiving objects: 100% (283/283), 215.04 KiB | 898.00 KiB/s, done.
Resolving deltas: 100% (145/145), done.

user@Projects:tt$ {\bf cd kramse-labs/}

user@Projects:kramse-labs$ {\bf ls}
LICENSE  README.md  core-net-lab  lab-network  suricatazeek  work-station
user@Projects:kramse-labs$ git pull
Already up to date.
\end{alltt}

for reference at home later




\exercise{ex:sw-downloadDEB}

\exercise{ex:basicDebianVM}

\exercise{ex:basicLinuxetc}

\exercise{ex:debian-firewall}

\exercise{ex:git-tutorial}

\slide{End of part I}

\hlkimage{14cm}{chris-benson-nKEARsgmrqc-unsplash.jpg}

\centerline{\Large Take a break!}





\slidenext{Buy the books!}



\end{document}
