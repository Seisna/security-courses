\documentclass[a4paper,11pt,notitlepage]{oevelser}
% Henrik Kramselund  , February 2001
% hlk@security6.net,
% course for basic IPv6
% My standard packages
\usepackage{solido-network-exercises}

\begin{document}
\selectlanguage{danish}

\newcommand{\emne}[1]{Netv�rkssikkerhed i firmanetv�rk}
\newcommand{\kursus}[1]{\emne{} workshop}
\newcommand{\kursusnavn}[1]{\emne\\ �velsesh�fte}

\mytitle{Netv�rkssikkerhed i firmanetv�rk}{�velsesh�fte}


\thispagestyle{empty}
\eject

\pagenumbering{roman}
\setlength{\parskip}{0pt}

\setcounter{tocdepth}{0}

\normal

{\color{titlecolor}\tableofcontents}
%\listoffigures - not used
%\listoftables - not used

\normal
\pagestyle{fancyplain}
\chapter*{\color{titlecolor}Forord}
\markboth{Forord}{}
Dette kursusmateriale er beregnet til brug p� kurset
\emph{\kursus}. Materialet er lavet af Henrik Kramselund  , \link{http://www.solidonetworks.com}

Materialet skal opfattes som beskrivelse af netv�rkssetup og
applikationer til kurser og workshops med behov for praktiske
�velser.

Til workshoppen h�rer desuden en pr�sentation som udleveres og der
henvises til et antal dokumenter som kan hj�lpe under �velserne.

\vskip 1cm
God forn�jelse
%\eject

\section*{\color{titlecolor}Oversigt}
\markright{Oversigt}
\setlength{\parskip}{10pt}

Materialet er inddelt i et antal omr�der som er beregnet til at give
valgfrihed i ops�tningen af milj�et.

Form�let med kurserne at ofte at give kursusdeltagerne et indblik i
hvordan emnet i praksis ser ud og opf�rer sig. De foresl�ede
konfigurationer ligger derfor t�t op ad virkelige konfigurationer, men
kan samtidig passes ind i et eksisterende kursusnetv�rk.

% beskrivelse af �velses materialet

%Der er f�lgende �velser som forventes at kunne udf�res p� det
%beskrevne netv�rk:
%\begin{itemize}
%\item IP forbindelser og sniffere
%\item SSH login - Putty og Unix SSHD
%\item
%\end{itemize}

\section*{\color{titlecolor}Foruds�tninger}

Dette materiale foruds�tter at deltageren har kendskab til
TCP/IP p� brugerniveau. Det betyder at begreber som
\link{www.solidonetworks.com},
\href{mailto:hlk@solido.net}{hlk@solido.net}, IP-adresse og DHCP
ikke b�r v�re helt ukendte.

% ordliste ikke lavet til forensics!
%Dog er der i appendix \ref{app:ordliste} lavet en ordliste der kan
%hj�lpe med til at huske de vigtigste begreber som benyttes i dette
%materiale og indenfor \emne{} generelt.

\section*{\color{titlecolor}V�rkt�jer}
%\markright{V�rkt�jer}

Materialet er beregnet p� at kunne udf�res i et almindeligt
kursuslokale med netv�rksopkoblede pc'er.

De praktiske �velser benytter i vid udstr�kning Open Source og
kan derfor afvikles p� blandt andet f�lgende platforme:
\begin{itemize}
\item Unix - herunder Linux, OpenBSD, NetBSD, FreeBSD og Mac OS X
\item Microsoft Windows 2000 og XP - prim�rt som
  klientoperativsystem
\item Kravene til kursisternes arbejdspladser er generelt en browser
  og SSH adgang
\item P� visse kurser udleveres en Linux boot CD som kan benyttes til
  at skifte kursusisternes arbejdsplads til at k�re Linux
\end{itemize}

Udover de programmer der gennemg�s er der f�lgende programmer som kan
v�re til stor nytte:
\begin{itemize}
%\item \link{http://www.ctan.org} - \LaTeX
\item \link{http://www.openbsd.org} - OpenBSD - en moderne Unix med
  fokus p� sikkerhed
\item \link{http://www.openssh.com} - OpenSSH - Secure Shell
  v�rkt�jer b�de server og klientprogrammer. Giver sikkerhed mod aflytning
\end{itemize}

% =================== body of the document ===============
% Arabic page numbers
\pagenumbering{arabic}
\rhead{\fancyplain{}{\bfseries \chaptername\ \thechapter}}

% Main chapters
%---------------------------------------------------------------------
% gennemgang af �velserne
% check questions
% eventuelle �bne sp�rgsm�l
% henvisning til �velse, hvis der er en



\chapter*{\color{titlecolor}Introduktion til netv�rk}
%\markboth{Introduktion til netv�rk}{}
\label{chap:intro}

\section*{\color{titlecolor}TCP/IP - Internet protokollerne}
Det er vigtigt at have viden om IP for at kunne implementere sikre
infrastrukturer da man ellers vil have sv�rt ved at v�lge mellem de
mange muligheder for implementation.

\section*{\color{titlecolor}OSI reference model}
En af de mest benyttede modeller til beskrivelse af netv�rk er OSI
reference modellen som gennemg�s i alle datakommunikationsb�ger.

Denne model beskriver hvorledes man kan opdele funktionerne i netv�rk
i lag som s� kan implementeres uafh�ngigt og derfor kan udskiftes
nemmere - eksempelvis n�r der kommer nye transmissionsteknologier p�
de lavere niveauer.

P� billedet ses en oversigt over OSI referencemodellen, ogs� kaldet
7-lags modellen. OSI modellen sammenlignes med internetmodellen, som
ligeledes er lagdelt.

Fordelen ved at opdele i flere lag er at man kan l�se problemerne
uafh�ngigt og f�r frihed til at udskifte dele. Eksempelvis er de
nederste fysiske lag med tiden blevet hurtigere ved skift fra 10Mbit
Ethernet baseret p� coax-kabler, henover 100Mbit Ethernet p�
twisted-pair kabler til idag hvor Gigabit er udbredt.


\begin{figure}[H]
\label{fig:osi}
\begin{center}
\colorbox{white}{\includegraphics[width=8cm,angle=90]{images/compare-osi-ip.pdf}}
\end{center}
\caption{OSI og Internetmodellerne}
\end{figure}


\section*{\color{titlecolor}Standarder og RFC'er}
De dokumenter som beskriver internet-standarderne udgives i en r�kke
Request for Comments (RFC'er) som kan hentes via
\link{ftp://ftp.ietf.org/rfc}. N�r en standard eller et dokument i
denne serie opdateres sker det ved genudgivelse under et nyt nr - og
derved bevares de gamle versioner af alle dokumenterne. For at lette
navigeringen i disse dokumenter udgives et index-dokument som blandt
andet beskriver om et dokument er erstattet med en ny version. I
serien er ogs� oversigter over opdelinger indenfor RFC'erne:
eksempelvis standarder (STD), For Your Information (FYI) og Best
Current Practice (BCP).

Et eksempel fra index filen er IP specifikationen (version 4):\\
0791 Internet Protocol. J. Postel. Sep-01-1981. (Format: TXT=97779
bytes) (Obsoletes RFC0760) (Updated by RFC1349) (Also STD0005)
(Status: STANDARD)

Det betyder at RFC-0791 alts� er en standard og den erstatter
RFC-0760.

Hvis man s� kigger p� den tilsvarende information for et
\emph{for�ldet} dokument ser det s�ledes ud:\\
760 DoD standard Internet Protocol. J. Postel. Jan-01-1980. (Format:
TXT=81507 bytes) (Obsoletes IEN 123) (Obsoleted by RFC0791) (Updated
by RFC0777) (Status: UNKNOWN)


\chapter*{\color{titlecolor}Hardware og netv�rk til �velserne}
%\markboth{Hardware og netv�rk til �velserne}{}

I dette afsnit beskrives de krav der stilles til milj�et hvor de
beskrevne �velser kan udf�res.

Foruds�tningerne for �velserne er et lokale med et antal PC'er
med Microsoft Windows klienter og netv�rksadgang.

En del af �velserne udf�res med Unix, specifikt med OpenBSD, dette
valg er udfra en betragtning om at det er meget stabilt og
underst�tter de funktioner godt som beskrives i kurset.

OpenBSD er et moderne operativsystem som er frit tilg�ngeligt og fordi
det er Open Source tillader det at man kan unders�ge og tilpasse
systemet. Man kan endda benytte BSD systemerne kommercielt - hvis man
�nsker det.

Hvis der er mulighed for det kan man installere en anden Unix variant,
ellers skal der som minimum v�re adgang til en
maskine som flere brugere deler:
\begin{itemize}
\item Et flerbruger Unix system som eksempelvis kan v�re OpenBSD
\item et udvalg af editorer - s� folk f�ler sig hjemme, EMACS, VI,
  JOVE, Nedit ... I de grafiske brugergr�nseflader findes flere
  lettilg�ngelige  editorer, der som Nedit fungerer med en File ->
  Save menu.
\item OpenSSH - mulighed for b�de login og filoverf�rsel p� sikker vis.
\item webserver med de filer der skal bruges
\item hubs, switches, netkort - alt efter hvor komplekst et setup der
  vil arbejdes med
\end{itemize}

Et antal windows programmer stilles til r�dighed via webserveren:
\begin{itemize}
\item putty - SSH adgang fra Windows
\item winscp - nem adgang til filoverf�rsel via SSH indeholder tillige editor
\item wireshark - open source pakkesniffer
\end{itemize}


Form�let med kurset er blandt andet at forst� hvad der sker i netv�rk
og derfor introduceres emnerne ved hj�lp af konfigurationsfiler og
lavniveau beskrivelse af emnet.

Konfigurationsfilerne er ofte mere kompakte og tydelige end
tilsvarende screen-dumps fra GUI programmer.

Tilsvarende implementerer GUI programmerne ikke altid alle dele af de
underliggende lag - og er derfor ikke komplette. Eksempelvis
indeholder firewall funktionen p� Mac OS X ingen information om TCP og
UDP eller forskellen p� disse.


Alle filer er tilg�ngelige b�de p� den lokale server i kursuslokalet
og via Internet. P� kurset gives anvisninger til adgangen.





\chapter*{\color{titlecolor}Indholdet i �velserne}
\markboth{Indholdet i �velserne}{}

De fleste af �velserne har f�lgende indhold:
\begin{itemize}
\item {\bfseries Opgave:} Hvad g�r �velsen ud p�
\item {\bfseries Form�l:} Hvad forventes det at man l�rer ved at l�se opgaven
\item {\bfseries Forslag til fremgangsm�de:} er en hj�lp til at komme igang
\item {\bfseries Hj�lp:} et eller flere tips eller beskrivelser af hvordan
  man kan l�se opgaven
\item {\bfseries Forslag til l�sning:} en mulig l�sning til opgaven
\item {\bfseries Diskussion:} er opl�g til diskussion efter l�sning af
  opgaven. Der er mulighed for at sammenligne og diskutere de valgte
  l�sninger.
\end{itemize}


\chapter{Putty installation - Secure Shell login}
\label{ex:putty-install}
\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Installer Putty lokalt p� Windows maskinen

{\bfseries Form�l:}\\
Installere et SSH program s�ledes at man kan tilg� servere og systemer senere i kurset.

{\bfseries Forslag til fremgangsm�de:}\\
Hent og installer programmet, hent fra webserveren eller\\
\link{http://www.chiark.greenend.org.uk/\~sgtatham/putty/download.html}


{\bfseries Hj�lp:}\\
Putty er en terminal emulator og erstatter telnet programmet i
Windows. Det er ofte den foretrukne brugergr�nseflade for Unix brugere
og hackere. Husk at putty skal have at vide at det er SSH protokollen og ikke
Telnet

Hvis der skal �ndres p� profiler kan Putty godt drille lidt, husk
altid at trykke \verb+Save+ i profilvinduet - s� indstillingerne du har
valgt gemmes til n�ste gang

{\bfseries Forslag til l�sning:}\\
Hvis man kender SSH i forvejen anbefales det at man ser p�
brug af public key autentifikation herunder n�glegenerering og
installation.

{\bfseries Diskussion:}\\
SSH protokollen tillader b�de login og filoverf�rsel - secure copy

Man B�R bruge SSH protokol version 2!

{\bf NB: benyt gerne chancen til at skrive IP-adresser ind i hosts
filen lokalt p� din maskine}.

Eksempel:
\begin{alltt}
10.0.45.36    fiona
\end{alltt}

Det g�r det nemmere senere at skrive \verb+ping fiona+ for at se om
der er forbindelse til serveren.


\chapter{WinSCP installation - Secure Copy}
\label{ex:winscp-install}

{\bfseries Opgave:}\\
Installer WinSCP lokalt p� Windows maskinen

{\bfseries Form�l:}\\
Installere et GUI program s� man kan unders�ge serversystemerne senere, eksempelvis l�se konfigurationsfiler. Sekund�rt afpr�ve SSH protokollen til filoverf�rsel - se at det er nemt.

{\bfseries Forslag til fremgangsm�de:}\\
Hent og installer programmet, hent winscp fra webserveren eller fra\\
\link{http://winscp.sourceforge.net}

Installer programmet som beskrevet

{\bfseries Hj�lp:}\\
WinSCP kan v�re en stor hj�lp n�r I skal arbejde med filer p� Unix
systemet - I kan ofte slippe for Unix editorerne VI og EMACS

{\bfseries Diskussion:}\\
Kan WinSCP bruges generelt til opdatering af websites? hvad kr�ver
det? kan brugerne finde ud af det?

WinSCP indeholder ogs� en editor, s� vi slipper for Unix VI editor ;-)

\chapter{Login p� Unix systemerne}
\label{ex:unix-login}

{\bfseries Opgave:}\\
Brug jeres arbejdsplads til at logge ind p� serverne

Det kr�ves at der er installeret SSH program, eksempelvis Putty fra
�velse \ref{ex:putty-install}.

{\bfseries Form�l:}\\
F� adgang til Fiona server s�ledes at man kan udf�re opgaverne fra denne server senere i kurset

{\bfseries Forslag til fremgangsm�de:}\\
Brug SSH til at logge ind p� Fiona eller en anden host i netv�rket

{\bfseries Hj�lp:}\\
Der skal bruges enten Putty p� Windows eller ssh programmet p� Unix/boot CD

Med Unix/boot CD og OpenSSH kan logges ind s�ledes:\\
\verb+ssh brugernavn@server -p port+ dvs p� fiona:\\
\verb+ssh kursus1@fiona -p 22+

NB: fiona er ikke med i DNS, s� brug IP-adressen!

%I kan ogs� logge ind p� Fiona som er en OpenBSD server
P� kursusservere er brugernavne: kursus1, kursus2, kursus3, op til
kursus10 - allesammen med kodeord \emph{kursus}.


{\bfseries Forslag til l�sning:}\\
Start Putty/Boot p� CD'en

{\bfseries Diskussion:}\\
Kan boot CD'en bruges til andre form�l?

Hvad indeholder CD'en?

{\bfseries Hostoplysninger:}\\

\begin{itemize}
\item I bedes registrere IP-adresserne for maskinerne
\item Filer til installation - installationsprogrammer:\\
http:// \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm /public/windows/
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm - Din egen
  arbejdsstation - Windows
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm - Fiona
  OpenBSD scanserver, nmap mv.
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm -
%\item Fiona maskinen benyttes med SSH til {\bf port 22781}!
\item Til mange opgaver er det n�dvendigt med superbruger privilegier
  - root
\item Skift til root med kommandoen: \verb+sudo -s+ - hvorefter jeres
  prompt �ndres til en have l�ge \verb+#+
\end{itemize}



\chapter{F�ling med Unix}
\label{ex:unix-cal}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Brug manualsiderne til at besvare f�lgende sp�rgsm�l:

\begin{list2}
\item Hvad er \verb+cal+? Hvad skete der i september 1752?
\item Hvad er \verb+date+?
\item Hvad g�r \verb+clear+?
\item Hvad g�r \verb+echo+?
\end{list2}


{\bfseries Form�l:}\\
Pr�ve et par kommandoer for at blive fortrolig med Unix - det g�r ikke ondt :-)

{\bfseries Forslag til fremgangsm�de:}\\
Log ind p� systemet og udf�r opgaven fra kommandolinien.

Du kan enten skrive \verb+man cal+, \verb+man date+, \verb+man clear+,
\verb+man echo+ eller m�ske blot pr�ve at skrive kommandoerne

\begin{alltt}
$ date
...
$ cal
...
$ cal 2007
...
$ cal 1752
... osv. - output er skjult med vilje i ovenst�ende :-)
\end{alltt}

{\bfseries Hj�lp:}\\
I denne opgave er det ligegyldigt hvilken server der v�lges.
Manualsystemet bruger ofte programmet \verb+less+ til at vise manualsiderne
- dette program bruger / til at s�ge med. Tryk / og skriv et s�geord
og tryk enter.

Du kan s�ge bagl�ns med sp�rgsm�lstegnet.

{\bfseries Forslag til l�sning:}\\
Skriv \verb+man cal+ og s�g efter 1752 med /

{\bfseries Diskussion:}\\
S�gning med / og ? er ofte benyttet i Unix programmer, eksempelvis
manualsystemet.

\chapter{Unix - adgang til root}
\label{ex:sudo}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Hvad er forskellen mellem switch user \verb+su -+ og superuser do
\verb+sudo -+ ?

{\bfseries Form�l:}\\
L�re at kunne skifte til root, s�ledes at man kan udf�re eksempelvis portscan med Nmap effektivt

{\bfseries Forslag til fremgangsm�de:}\\
Brug manualsiderne til at besvare f�lgende sp�rgsm�l:
\begin{list2}
\item Hvad er forskellen p� \verb+su -+ og \verb+sudo -s+?
\item Kan su konfigures til ikke at kr�ve kodeord? kan sudo?
\item Hvilket kodeord skal man bruge til de to kommandoer?
\end{list2}

{\bfseries Hj�lp:}\\
Switch user er den gamle og kendte kommando til at skifte til en anden
bruger, hvis man kender p�g�ldende brugers kodeord.

Superuser do er en mere moderne m�de at skifte bruger, eller udf�re
administrationskommandoer p� Unix. SUDO tillader at man bruger sit
eget kodeord, kodeord for brugeren man vil skifte til eller man kan
konfigurere den til ikke at kr�ve kodeord.

Su giver altid fuld adgang og man skal give root kodeord til alle.

Sudo giver fintmasket adgang til at udf�re enkelte
kommandoer. Eksempelvis vil en webadministrator kunne f� lov til at
genstarte Apache, men ellers ikke andet som root.

{\bf Diskussion:}\\
Sudo benyttes n�sten alle steder og betragtes som de facto
standarden. Nogle steder og p� egne servere/workstations benyttes den
ofte uden password - er det fornuftigt?



Vi skal bruge root adgang til at l�se konfigurationsfiler til services
og genstarte services. Pas p� n�r I k�rer som root, log evt. ind som kursusbruger altid og skift kun til root med \verb+sudo kommando+ - s� g�r det ikke helt galt :-)

Eksempel kommando med sudo:
\begin{alltt}
\small
hlk@bigfoot:hlk$ sudo apachectl configtest
Syntax OK
hlk@bigfoot:hlk$ sudo apachectl restart
hlk@bigfoot:hlk$
\end{alltt}

(Bem�rk ogs� at Unix ikke fort�ller ret meget n�r ting g�r godt)


\chapter{Unix boot CD}
\label{ex:unix-boot-cd}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Boot en PC med en Unix boot CD

{\bfseries Form�l:}\\
Pr�ve en v�rkt�jskasse med netv�rksv�rkt�jer.

{\bfseries Forslag til fremgangsm�de:}\\
Brug den udleverede CD i en PC, eller vi g�r det f�lles

{\bfseries Hj�lp:}\\
Der findes et stort antal boot CD'er baseret p� Linux til forskellige
form�l. Nogle af de mest kendte indenfor sikkerhed er:
\begin{itemize}
\item BackTrack Linux - en st�rre
  samling af sikkerhedsb�rkt�jer til penetrationstest
\item Damn Vulnerable Linux, en usikker Linux distribution, hvor man
  kan l�re om sikkerhedsproblemer i software
\end{itemize}

{\bf Diskussion:}\\
Til mange af CD'erne er der nogle boot koder som indimellem er
n�dvendige - typisk for at v�lge opl�sning for det grafiske
milj�. Hvis CD'en ikke virker i en bestemt maskine kan det v�re
n�dvendigt at pr�ve i en mere standard maskine.

Typisk er det fordi producenterne af tr�dl�se netkort og grafikkort
ikke vil oplyse specifikationerne og instruktionerne til at
programmere enheden.

Specielt hvis man �nsker at bruge tr�dl�se v�rkt�jer fra BackTrack
CD'en kan det v�re en fordel at indk�be specielle netkort. Kort
baseret p� Atheros chipset plejer at virke fint.



\chapter{Netv�rksinformation: ifconfig/ipconfig}
\label{ex:network-ifconfig}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Brug ifconfig/ipconfig til at indsamle information

{\bfseries Form�l:}\\
L�re at l�se output fra netv�rkskonfiguration - specielt skal man kunne genkende netv�rksmasker og checke om de er sat rigtigt.

{\bfseries Forslag til fremgangsm�de:}\\
Udf�r kommandoen \verb+ifconfig -a+ p� Unix systemerne og
se information om netv�rkskort.

Tilsvarende udf�res kommandoen \verb+ipconfig /all+ p� Windows og
se information om netv�rkskort.


{\bfseries Hj�lp:}\\
Hvad er forskellen p�\\
\verb+ifconfig -a+ og \verb+ifconfig vr0+ (Linux: \verb+ifconfig eth0+)

{\bfseries Diskussion:}\\
Udover ifconfig og netstat der altid findes p� Unix kan det v�re en
fordel at installere list open files kommandoen, \verb+lsof+. Med
denne kommando kan man se hvilke programmer der benytter hvilke filer,
herunder netv�rksforbindelser.

Bem�rk: p� Linux kaldes netv�rkskort for eth0, eth1, ... mens OpenBSD
bruger interfacenavne svarende til den driver/hardware som benyttes
nfe0, vr0, em0 osv. Mac OS X og AIX bruger en0, en1, ...

Vores systemer Fiona, Luffe og Biance benytter allesammen VIA Rhine kort.
Soekris 4801 systemer benytter sis driver, s� netkort hedder sis0, sis1 og sis2

Timon benytter Intel gigabit netkort som kaldes em0, Atheros baserede netkort til 802.11b/g kaldes typisk for ath0, ath1 osv.

AIX og Mac OS X kalder netkortene for en0, en1 - Mac OS X g�r det endda for wireless kort.

Windows kalder kommandoen ifconfig for \verb+ipconfig+ eller \verb+ipv6+ hvis det er information omkring IPv6.

Forvirret? :-)

Brug altid f�rst \verb+ifconfig -a+ evt. \verb+ifconfig -a | more+



\chapter{Netv�rksinformation: netstat}
\label{ex:network-netstat}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Brug netstat til at indsamle information

{\bfseries Form�l:}\\
Netstat er et af de prim�re v�rkt�jer til at unders�ge routingtabeller og det er n�dvendigt at kende routing for at kunne bruge mere avancerede features som VLANs

{\bfseries Forslag til fremgangsm�de:}\\
Udf�r kommandoerne \verb+netstat+ p� systemerne og
se information om netv�rkskort, lyttende serverprogrammer og
igangv�rende forbindelser.


{\bfseries Hj�lp:}\\
Hvad er forskellen p�\\
\verb+netstat -an+ og \verb+netstat -a+

Netstat har mange options, men den mest benyttede er:\\
\verb+netstat -an+ evt. kombineret med grep\\
\verb+netstat -an | grep -i listen+

Netstat kan ogs� vise memoryforbrug og interfacestatistik med -m og -i
options.

Routingtabellen vises med \verb+netstat -rn+ evt. \verb+netstat -rn -f inet+
eller \verb+netstat -rn -f inet6+


{\bfseries Diskussion:}\\
Udover ifconfig og netstat der altid findes p� Unix kan det v�re en
fordel at installere list open files kommandoen, \verb+lsof+. Med
denne kommando kan man se hvilke programmer der benytter hvilke filer,
herunder netv�rksforbindelser.

\chapter{ping og traceroute}
\label{ex:ping}

{\bfseries Opgave:}\\
L�r at bruge ping og traceroute programmerne

{\bfseries Form�l:}\\
Disse programmer er vores prim�re diagnosticeringsprogrammer for netv�rk og det er obligatorisk at kende dem.

{\bfseries Forslag til fremgangsm�de:} \\
Brug \verb+ping+ og \verb+traceroute+ til at teste netv�rksforbindelsen - kan
udf�res fra b�de windows og Unix.

Husk at traceroute hedder \verb+tracert+ p� windows.

Er der forbindelse til alle servere p� oversigtstegningen?

{\bfseries Hj�lp:} \\
ICMP er Internet Control Message Protocol det bruges typisk til at
rapportere om fejl, host unreachable og lignende.

Ping programmet benytter ICMP ECHO request og forventer ICMP ECHO
reply. Traceroute programmet sender ICMP eller UDP og forventer ICMP
svar tilbage for at kunne mappe et netv�rk.

{\bf Ekstra:}
Hvad er forskellen p� (skal udf�res p� OpenBSD/Unix)
\begin{list2}
\item {\bfseries traceroute} og {\bfseries traceroute -I}
\item NB: traceroute med -I findes kun p� Unix - traceroute med ICMP pakker
\item Der er mange der ikke blokerer for ICMP traceroute
\end{list2}


\chapter{ping6 og traceroute6}
\label{ex:ping6}

{\bfseries Opgave:}\\
L�r at bruge ping og traceroute programmerne - men med IPv6

{\bfseries Form�l:}\\
Disse programmer er vores prim�re diagnosticeringsprogrammer for netv�rk og det er obligatorisk at kende dem.

{\bfseries Forslag til fremgangsm�de:} \\
Brug \verb+ping6+ og \verb+traceroute6+ til at teste netv�rksforbindelsen - kan
udf�res fra b�de windows og Unix.

Husk at traceroute hedder \verb+tracert6+ p� windows.

Er der forbindelse til alle servere p� oversigtstegningen?

{\bfseries Hj�lp:} \\
ICMP er Internet Control Message Protocol det bruges typisk til at
rapportere om fejl, host unreachable og lignende. IPv6 har tilsvarende ICMPv6 med samme funktioner - men har overtaget ARP funktionen.

Ping programmet benytter ICMP ECHO request og forventer ICMP ECHO
reply. Traceroute programmet sender ICMP eller UDP og forventer ICMP
svar tilbage for at kunne mappe et netv�rk.

{\bf Ekstra:}
Hvad er forskellen p� (skal udf�res p� OpenBSD/Unix)
\begin{list2}
\item {\bfseries traceroute} og {\bfseries traceroute -I}
\item NB: traceroute med -I findes kun p� Unix - traceroute med ICMP pakker
\item Der er mange der ikke blokerer for ICMP traceroute
\end{list2}

Det er ikke altid at IPv4 og IPv6 routes g�r gennem de samme routere! Det er med vilje lavet simpelt i vores setup.



\chapter{Wireshark netv�rksniffer}
\label{ex:wireshark}

\hlkimage{9cm}{images/ethereal-main-window.pdf}

{\bfseries Opgave:}\\
Pr�v en Wireshark sniffer p� din maskine!

Brug lidt tid p� at l�re den at kende.

{\bfseries Form�l:}\\
L�re at bruge en sniffer til enkle unders�gelser, s� man senere kan l�re mere om netv�rk.

{\bfseries Forslag til fremgangsm�de:}\\
Find Wireshark og installer denne, hent fra den lokale webserver eller \link{http://www.wireshark.org}

{\bfseries Hj�lp:}\\
Find ud af hvordan det er underst�ttet i dit favorit operativsystem
ved at bruge eksempelvis \link{http://www.google.com}

{\bfseries Forslag til l�sning:}\\
Windows - hvis du er p� Windows skal der
installeres WinPCAP - packet capture - biblioteket. Dette bibliotek f�lger med
Wireshark i installationsfilen.

%adressen:
%\href{http://www.security6.net/courses/programs/WinPcap_3_0_beta.exe}
%{http://www.security6.net/courses/programs/WinPcap\_3\_0\_beta.exe}

Unix - de fleste Unix varianter har installationspakker til Wireshark
og TCPdump

Pr�v efter installationen at kigge p� den normale trafik p� nettet,
eller generer selv trafik med ping og traceroute (windows: tracert)
programmer
- n�r dette er gjort virker snifferen

{\bfseries Diskussion:}\\
Kender du forskel p� ICMP, TCP og UDP?

Hvilke protokoller bruger kryptering?

Husk ogs� at sniffe en TCP session og sammens�t alle pakkerne med
TCP Follow Stream funktionaliteten.

Wireshark er en efterf�lger til Ethereal, navneskiftet skyldes et jobskifte hvor ejeren af Ethereal dom�net ikke ville give det med programm�ren.

\chapter{VLAN 802.1q}
\label{ex:vlan}

\hlkimage{14cm}{vlan-8021q.pdf}

{\bfseries Opgave:} \\
Se VLAN konfiguration i webinterface

{\bfseries Form�l:}\\
Se et par eksempler p� hvordan 802.1q kan v�re implementeret. Der er stor forskel p� brugervenligheden.

{\bfseries Forslag til fremgangsm�de:} \\
Login p� de tilg�ngelige enheder som har 802.1q

Der er f�lgende enheder:
\begin{itemize}
\item Managed switch
%\item Linksys WRV-200 switch, access point og router
%\item Juniper SSG5 firewall og router
\item OpenBSD, hvis man kender OpenBSD i forvejen - se man \verb+hostname.if+ ;-)
\end{itemize}

NB: ikke alle enheder tillader flere samtidige logins, specielt firmware i sm� enheder g�r ikke

{\bfseries Hj�lp:} \\
Mange moderne managed switche har mulighed for VLAN efter 802.1q standarden.

{\bfseries Diskussion:}\\
Er det for besv�rligt?

Husk at hvis man opdeler i VLAN kan maskinerne ikke se hinanden, og der skal routes ligesom hvis det var fysiske interfaces!






\chapter{DNS og navneopslag}
\label{ex:basic-dns-lookup}

{\bfseries Opgave:}\\
Pr�v forskellige programmer til at sp�rge en service

{\bfseries Form�l:}\\
L�re om DNS records og hvordan man kan sl� dem op programmatisk

{\bfseries Forslag til fremgangsm�de:}\\
\begin{itemize}
\item nslookup - findes b�de p� Unix og Windows
\item Pr�v nslookup -q=txt -class=CHAOS version.bind. 0
\item dig - syntaks @server domain query-type query-class
\item host - syntaks host [-l] [-v] [-w] [-r] [-d] [-t querytype] [-a] host [server]
\item pr�v {\bfseries host -a security6.net} \\
{\bfseries host -a www.security6.net} - hvad er forskellen
\end{itemize}

{\bfseries Hj�lp:}\\
Host programmet er med som standard p� OpenBSD - s� brug Fiona eller Luffe

P� Unix Boot CD og MS Windows platformen findes mange GUI programmer til det samme.

{\bfseries Diskussion:}\\
Hvad er en zonetransfer? det er alle de records der er defineret for
et dom�ne

Hvad er forward og reverse lookup? forward er fra hostnavn til IP adresse,
mens reverse er fra IP adresse til hostnavn



\chapter{DNS og navneopslag - IPv6}
\label{ex:basic-dns-lookup6}

{\bfseries Opgave:}\\
Pr�v host programmet til at sp�rge efter Quad-A (AAAA) records.

{\bfseries Form�l:}\\
L�re om IPv6 specifikke DNS records og hvordan man kan sl� dem op programmatisk

{\bfseries Forslag til fremgangsm�de:}\\
\begin{itemize}
\item host - syntaks host [-l] [-v] [-w] [-r] [-d] [-t querytype] [-a] host [server]
\item pr�v {\bfseries host -t A security6.net} \\
{\bfseries host -t AAAA security6.net} - hvad er forskellen
\end{itemize}

{\bfseries Hj�lp:}\\
Host programmet er med som standard p� OpenBSD - s� brug Fiona eller Luffe

P� Unix Boot CD og MS Windows platformen findes mange GUI programmer til det samme.

{\bfseries Diskussion:}\\
DNS har mange recordtyper og AAAA er blot endnu en. Typisk vil programmer der har IPv6 funktionalitet fors�ge at sl� b�de AAAA records og A records op - og fors�ge at forbinde til AAAA f�rst.


\chapter{Opslag i whois databaser}
\label{ex:whois}


{\bfseries Opgave:} \\
L�r at bruge whois

{\bfseries Form�l:}\\
L�re whois at kende - eksempelvis kunne sl� abuse adresser op

{\bfseries Forslag til fremgangsm�de:}\\
\begin{list2}
\item Login p� UNIX server - l�s manualen til programmet whois
eller brug webinterface p�\\ \link{http://www.ripe.net}
\end{list2}

{\bfseries Hj�lp:}\\
Whois databaserne er fordelt p� ARIN, RIPE, LACNIC og APNIC.

Kommandoen \verb+whois -r 90.184.69.97+ vil p� en OpenBSD give
svaret p� et opslag i RIPE databasen efter IP adresse 90.184.69.97

{\bfseries Diskussion:}\\
I skal l�re at sp�rge efter IP adresser og spore oprindelsen - find
eksempelvis brugeren af IP-adressen 217.157.20.129


\chapter{Ekstraopgave: ICMP tool icmpush}
\label{ex:icmpush}

{\bfseries Opgave:} \\
L�r at bruge icmpush programmet

{\bfseries Form�l:}\\
Se et eksempel p� et kommandoliniev�rkt�j der kan sende valgfrie data til netv�rket - uden programmering

{\bfseries Forslag til fremgangsm�de:} \\
Login p� Unix server - l�s manualen til programmet

{\bfseries Hj�lp:} \\
ICMP er Internet Control Message Protocol det bruges typisk til at
rapportere om fejl, host unreachable og lignende.

Ping programmet benytter ICMP ECHO request og forventer ICMP ECHO
reply. Traceroute programmet sender ICMP eller UDP og forventer ICMP
svar tilbage for at kunne mappe et netv�rk.

{\bfseries Diskussion:}\\
I skal l�re at sp�rge efter mindst echo, time og netmask med icmpush




\chapter{Netv�rksinformation: sysctl}
\label{ex:sysctl}
%\hlkimage{6cm}{images/putty-1.jpg}

{\bfseries Opgave:}\\
Brug sysctl kommandoen til at indsamle information

{\bfseries Form�l:}\\
Se eksempler p� parametre der kan tunes p� en TCP/IP implementation

{\bfseries Forslag til fremgangsm�de:}\\
Udf�r kommandoen \verb+sysctl -a | grep net+ p� systemerne og
se information om IP-stakken p� systemet.

{\bfseries Hj�lp:}\\

Sysctl giver adgang til mange informationer:\\
\verb+net.inet.ip.forwarding+\\
\verb+net.inet6.ip6.forwarding+\\

Netstat kan ogs� vise memoryforbrug og interfacestatistik med -m og -i
options.

{\bfseries Diskussion:}\\
Udover ifconfig og netstat der altid findes p� Unix kan det v�re en
fordel at installere list open files kommandoen, \verb+lsof+. Med
denne kommando kan man se hvilke programmer der benytter hvilke filer,
herunder netv�rksforbindelser.



\chapter{Performance tool - iperf}
\label{ex:iperf}

{\bfseries Opgave:} \\
L�r at bruge iperf programmet

{\bfseries Form�l:}\\
F� et indblik i hvordan man med enkle testprogrammer kan f� m�lbare data fra netv�rksperformance

{\bfseries Forslag til fremgangsm�de:} \\
Login p� Unix server start en iperf server og tilsvarende start en iperf client p� en anden maskine i netv�rket.

Brug eksempelvis fiona som client og bianca som server.

{\bfseries Hj�lp:} \\
Iperf er et lille nemt program som blot skal startes som server p� en maskine og derefter kaldes som klient p� et andet. S� m�ler den som default et kort stykke tid og pr�senterer resultatet.

{\bfseries Diskussion:}\\
Til rigtige performancem�linger er det uhensigtsm�ssigt at netv�rket benyttes til anden traffik under m�lingerne, medmindre man �nsker at m�le nu og her.



\chapter{Afpr�v Apache Benchmark programmet}
\label{ex:apache-benchmark}

{\bfseries Opgave:}\\
Afpr�v ApacheBench programmet

{\bfseries Form�l:}\\
F� et indblik i hvordan man med enkle testprogrammer kan f� m�lbare data fra webservere

{\bfseries Forslag til fremgangsm�de:}\\
Pr�v at k�re med 100 eller 1000 foresp�rgsler p� en fil/url

{\bfseries Hj�lp:}\\
Pr�v \verb+ab -n 100 http://www.pentest.dk/+


{\bfseries Diskussion:}\\
Hvorn�r vil det v�re relevant at bruge ApacheBench?



\chapter{SNMP walk}
\label{ex:snmpwalk}

{\bfseries Opgave:}\\
Log ind p� et OpenBSD Unix system og se p� \verb+snmpwalk+

{\bfseries Form�l:}\\
Se eksempel p� data fra netv�rksenheder

{\bfseries Forslag til fremgangsm�de:}\\
SNMP walk betyder at man g�r igennem alle SNMP oplysningerne fra et system.

{\bfseries Hj�lp:}\\
\verb+snmpwalk -v 2c -c public 10.0.45.2+

Public er default p� meget udstyr og findes stadig mange steder i produktion.

Private er et andet kendt community name og gav tidligere lov til at �ndre indstillingerne p� enheder.

{\bfseries Diskussion:}\\








\chapter{Logning med syslogd og syslog.conf}
\label{ex:syslogd-basic}

{\bfseries Opgave:}\\
log ind p� et OpenBSD Unix system og se p� \verb+syslog.conf+

{\bfseries Form�l:}\\
Se mulighederne for at samle eller sortere logbeskeder med en standardfunktionalitet

{\bfseries Forslag til fremgangsm�de:}\\

\begin{list2}
\item Hvor ligger den? - i hvilket katalog?
\item Hvordan kan man sende loggen videre til en anden maskine?
\item Hvilken protocol og port bruger syslog - hvis I skal tillade det
  gennem en firewall?
\end{list2}

{\bfseries Hj�lp:}\\
 Indholdet af filen kan ses nedenfor:

\begin{alltt}
\small
*.err;kern.debug;auth.notice;authpriv.none;mail.crit    /dev/console
*.notice;auth,authpriv,cron,ftp,kern,lpr,mail,user.none /var/log/messages
kern.debug;user.info;syslog.info                        /var/log/messages
auth.info                                               /var/log/authlog
authpriv.debug                                          /var/log/secure
...
# Uncomment to log to a central host named "loghost".
#*.notice;auth,authpriv,cron,ftp,kern,lpr,mail,user.none        @loghost
#kern.debug,user.info,syslog.info                               @loghost
#auth.info,authpriv.debug,daemon.info                           @loghost
\end{alltt}

{\bfseries Diskussion:}\\
Se ogs� \link{http://www.loganalysis.org/}

{\bf Syslog er standard logging format/protokol for netv�rksenheder, ikke bare Unix }


\chapter{BIND version}
\label{ex:bind-version}

{\bfseries Opgave:} \\
Find version p� BIND software p� Unix

{\bfseries Form�l:}\\
Se et eksempel p� et lille script

{\bfseries Forslag til fremgangsm�de:}\\
Brug en af f�lgende kommandoer til at finde version p� BIND p�
navneserveren:\\

\verb+nslookup -q=txt -class=CHAOS version.bind. 0 server+

\verb+dig @server version.bind chaos txt+


{\bfseries Hj�lp:} \\

{\bfseries Diskussion:} \\
BIND softwaren er ofte udsat for angreb

BIND og navnesystemet er kritisk for mange funktioner som web og mail

Et mere komplet script kunne v�re:
\begin{alltt}\small
#! /bin/sh
# Try to get version info from BIND server, several ways to do this:
# nslookup -q=txt -class=CHAOS version.bind. 0
# dig @$* version.bind chaos txt

PROGRAM=`basename $0`
if [ $# -ne 1 ]; then
   echo "get name server version, need a target! "
   echo "Usage: $0 target"
   echo "example $0 10.1.2.3"
   exit 0
fi

TARGET=$1
# using dig
dig @$1 hostname.bind chaos txt
dig @$1 ID.SERVER chaos txt
dig @$1 version.bind chaos txt
echo Authors BIND er i versionerne 9.1 og 9.2 - m<E5>ske ...
dig @$1 authors.bind chaos txt
\end{alltt}


\chapter{AirPort Extreme}
\label{ex:AirPort-AP}

\hlkimage{10cm}{airport-configuration-3.png}

{\bfseries Opgave:}\\
Konfiguration af Apple AirPort Extreme

{\bfseries Form�l:}\\
Pr�ve et administrativt interface til et access point, sekund�rt se de mange muligheder som repr�senterer avancerede netv�rksenheder

{\bfseries Forslag til fremgangsm�de:}\\
Hent AirPort konfigurationsprogrammet til Windows og
brug denne til at konfigurere Apple AirPort

{\bfseries Hj�lp:}\\
Manualen til udstyret forefindes i PDF format

{\bfseries Forslag til l�sning:}\\
S�t det tr�dl�se udstyr i et isoleret netv�rk n�r det skal konfigureres

{\bfseries Diskussion:}\\
Hvad er de mange Ethernet stik til?

S�rg for at unders�ge alle mulighederne i konfigurationen

Pr�v evt. ogs� at se p� Linksys udstyret WAP54 og WRV-200


\chapter{Wardriving p� Windows - inSSIDer}
\label{ex:wardriving-windows}

%\hlkimage{10cm}{netstumbler.png}

{\bfseries Opgave:}\\
Installer inSSIDer p� en Windows laptop - og lav wardriving

Kr�ver I har et netkort der er underst�ttet

{\bfseries Form�l:}\\
Se hvor nemt det er at wardrive

{\bfseries Forslag til fremgangsm�de:}\\
Med inSSIDer(windows), Kismet(unix) og andre kan man
scanne efter tr�dl�se netv�rk med almindeligt tr�dl�st udstyr

{\bfseries Hj�lp:}\\

{\bfseries Forslag til l�sning:}\\
Hent programmet fra internet eller fra den lokale webserver
\link{http://www.metageek.net/products/inssider}

{\bfseries Diskussion:}\\
Er det lovligt?

Hvorfor er der s� mange �bne netv�rk?


\chapter{Wardriving p� Unix - Kismet}
\label{ex:wardriving-kismet}

{\bfseries Opgave:}\\
Afpr�v Kismet laptoppen - og lav wardriving

Kr�ver I har et netkort der er underst�ttet af Boot CD/Linux

{\bfseries Form�l:}\\
Se hvor nemt det er at wardrive

{\bfseries Forslag til fremgangsm�de:}\\
I skal blot se hvorledes wardriving tager sig ud p� Unix - kende
programmerne

{\bfseries Hj�lp:}\\

{\bfseries Forslag til l�sning:}\\
I skal v�re velkomne til at unders�ge hvordan Kismet installeres

{\bfseries Diskussion:}\\
Der findes ``stumbler'' programmer til de mest benyttede platforme,
men hvilke kort underst�ttes!

Det kan ofte v�re en god ide at unders�ge om det kort man vil k�be kan
bruges til at wardrive - idet wardriving er vigtigt internt i
virksomhederne for at finde uautoriserede (engelsk: rogue) access
points.

\chapter{Ekstraopgave: Airodump-ng lavniveau sniffer}
\label{ex:airodump}


{\bfseries Opgave:}\\
Afpr�v airodump-ng hvis I har lyst og har et netkort

Kr�ver I har et netkort der er underst�ttet af Boot CD/Linux

{\bfseries Form�l:}\\
Se hvor nemt det er at sniffe p� tr�dl�se netv�rk, hvis man har det rigtige v�rkt�j

{\bfseries Forslag til fremgangsm�de:}\\
Start kortet i monitormode med \verb+airmon-ng start+ derefter \verb+airodump-ng kort+\\
eksempelvis \verb+airmon-ng start ath0+ og \verb+airodump-ng ath1+

{\bfseries Hj�lp:}\\

{\bfseries Forslag til l�sning:}\\

{\bfseries Diskussion:}\\
Der findes en masse howto dokumenter og vejledninger, se \link{http://www.aircrack-ng}


\chapter{RADIUS client}
\label{ex:radius-client}

% http://open1x.sourceforge.net/ m�ske

{\bfseries Opgave:}\\

{\bfseries Form�l:}\\
Pr�ve at bruge et RADIUS testprogram fra Fiona serveren - den har b�de RADIUS server og client

{\bfseries Forslag til fremgangsm�de:}\\
Unders�g med  vores systemer og kommandoen radclient. Der er defineret en enkelt "user" i \verb+/etc/raddb/users+
med teksten:
\begin{alltt}
"kursus1"       Cleartext-Password := "kursus"
                Reply-Message = "Hello, %{User-Name}"
\end{alltt}

Dette b�r ved brug af kommandoerne nedenfor give resultat.

\begin{alltt}\footnotesize
echo "User-Name = kursus1" | radclient 127.0.0.1:1812 auth testing123

echo "User-Name=kursus1,Cleartext-Password=kursus " | radclient 127.0.0.1:1812 auth testing123
\end{alltt}

Output skulle ligne:
\begin{alltt}
	Received response ID 102, code 3, length = 36
        Reply-Message = "Hello, kursus1"
\end{alltt}

{\bfseries Hj�lp:}\\
Husk secret vores er testing123 som er default mange steder! (b�r selvf�lgelig �ndres)

Se ogs�: \link{http://wiki.freeradius.org/Radclient}

{\bfseries Diskussion:}\\
RADIUS er OK - men mange loginmetoder og protokoller er ikke!

RADIUS sikrer at man kan snakke sammen, men hvis man bruger cleartext passwords giver det naturligvis ringe sikkerhed.

Et godt r�d er at sikre:
\begin{itemize}
\item Hvem m� tale med RADIUS serveren, IP-adresser
\item Hvem kender hemmeligheden, secret
\item Brug TLS/SSL osv.
\item Lad v�re med at bruge PAP med cleartext password, lad v�re med at bruge PPTP osv.
\end{itemize}



\chapter{LDAP client}
\label{ex:ldap-client}

{\bfseries Opgave:}\\
Brug et LDAP klientprogram til at sl� op i LDAP

{\bfseries Form�l:}\\
Pr�ve at bruge et LDAP testprogram

{\bfseries Forslag til fremgangsm�de:}\\
Unders�g med \verb+ldapsearch+ vores systemer.

\verb+ldapsearch -h 10.0.45.12 -x -b 'dc=darky,dc=kramse,dc=dk' '(uid=root)' +

\verb+ldapsearch -h 10.0.45.12 -x -b 'dc=darky,dc=kramse,dc=dk' '(uid=*)'+

(husk den rigtige IP-adresse p� serveren)

{\bfseries Hj�lp:}\\
I kan ogs� pr�ve JXplorer som er et JAVA GUI program til LDAP

Det skal udfyldes med f�lgende oplysninger:
Host: 10.0.45.12 Port: 389\\
Protocol LDAP v3\\
BaseDN: dc=darky,dc=kramse,dc=dk\\
User DN: uid=diradmin,cn=users,dc=darky,dc=kramse,dc=dk\\
Password: henrik42


\link{http://www.jxplorer.org/}

{\bfseries Diskussion:}\\
Hvad er bind?

Hvad med LDAP kan det bruge SSL?







\chapter{Ekstraopgave: Firewallkonfiguration}
\label{ex:unix-basic-firewall}

{\bfseries Opgave:}\\
Konfiguration af en firewall - se eksempler, f�llesopgave

{\bfseries Form�l:}\\
L�r at genkende forskellige regels�t og firewallimplementationer

{\bfseries Forslag til fremgangsm�de:}\\
\begin{list2}
\item Hvordan enabler man firewall?
\item Hvordan �bner man for noget i vores firewall?
\item Tilf�j en regel for at tillade adgang til noget mere p� vores
  systemer
%\item G� sammen i hold pr system
\end{list2}

P� OpenBSD kan man se om firewall er enablet med kommandoen \verb+pfctl+. Pr�v f�lgende kommandoer p� eksempelvis Luffe
\begin{list2}
\item \verb+sudo pfctl -s all | more+
\item \verb+sudo pfctl -s rules | more+
\item \verb+sudo pfctl -s nat | more+
\item \verb+sudo pfctl -s states | more+
\item \verb+sudo pfctl -s info | more+\\
...
\end{list2}

{\bfseries Hj�lp:}\\
Vi gennemg�r sammen �ndringen p� de forskellige firewalls vi har til
r�dighed!

%Hint: se p� \verb+/etc/sysconfig/iptables+
%og \verb+system-config-securitylevel+

%NB: Hvis I oplever problemer med Red Hat konfigurationsv�rkt�jerne og
%X kan I lave \verb+unset DISPLAY+ for at tvinge det til tekstmode udgaven.

{\bfseries Diskussion:}\\
S�rg for at Henrik viser flere firewalls!

Der er GUI p� Mac OS X, Windows, Linux og ogs� til OpenBSD PF pfw




\chapter{Ekstraopgave: Find maskiner}
\label{ex:nmap-sweep}

{\bfseries Opgave:}\\
Log p� Unix og brug nmap til at s�ge efter maskiner p� lokalnetv�rket som ping sweep eller port sweep

{\bfseries Form�l:}\\
Afpr�v portscanning s� I senere kan finde maskiner og services

{\bfseries Forslag til fremgangsm�de:}\\
Lav forskellige typer scan og
inddel resultaterne efter:
\begin{list2}
\item aktive systemer
\item �bne porte/services
\end{list2}

{\bfseries Hj�lp:} \\
Pr�v med Nmap sweep:
\begin{list1}
\item \verb+nmap -sP 10.0.45.*+
\item \verb+nmap -p 80 10.0.45.*+
\item Pr�v ogs� gerne de andre netv�rk, .46 .53 osv.
\end{list1}

{\bfseries Diskussion:}\
Er det noget som foreg�r p� Internet? Ja, konstant


\chapter{Ekstraopgave: nmap portscanning}
\label{ex:nmap-portscan}

{\bfseries Opgave:} \\
Brug nmap til at finde �bne porte p� netv�rket

{\bfseries Form�l:}\\
Afpr�v portscanning s� I senere kan teste maskiner og services

{\bfseries Forslag til fremgangsm�de:}\\
Brug \verb+nmap -p 1-1024 server+ til at scanne de f�rste 1024 TCP
porte p� en server
Brug \verb+nmap -sU+ til at scanne efter UDP porte og \verb+-P0+
option til at undg� at sende ping f�rst

{\bfseries Hj�lp:} \\
Eksempel: \verb+nmap -P0 -sU -p1-1024 server+ UDP portscanning af port
1-1024 uden ping f�rst

{\bfseries Diskussion:}\\
TCP og UDP portscanning er meget forskelligt. TCP er
forbindelsesorienteret og har session setup i form af en three-way
handshake som g�r at en client f�rst sender TCP-SYN, server svarer med
TCP-SYN+ACK og derefter etableres forbindelsen endeligt med TCP-ACK fra
klienten. UDP er forbindelsesl�s kommunikation og der er ingen session
setup - derfor er UDP scanning mere up�lideligt.




\appendix
\rhead{\fancyplain{}{\bfseries\leftmark}}
%\setlength{\parskip}{5pt}
\normal


%\chapter{Kursusnetv�rk}
%\colorbox{white}{\includegraphics[width=18cm]{kursus-network.pdf}}


\chapter{Hostoplysninger}

\begin{itemize}
\item I bedes registrere IP-adresserne for maskinerne
\item Filer til installation - installationsprogrammer:\\
http:// \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm
/public/windows/ - webserver med diverse tools
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm - Fiona
\item Fiona maskinen benyttes med SSH
\item Kursus login brugernavne: kursus1, kursus2, ... kursus10
kodeord: \verb+kursus+ - uanset brugernavn
\item Skift til root med: \verb+sudo -s+
\end{itemize}

\section*{Vores maskiner}
\begin{itemize}
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm -
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm -
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm -
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm -
  OpenBSD Fiona server
\item IP: \hskip 15mm .\hskip 15mm .\hskip 15mm .\hskip 15mm - Din egen
  arbejdsstation - Windows/Linux
\end{itemize}



% der er ikke lavet ordliste til forensics workshop
%\chapter{Ordliste og forklaringer}
%\label{app:ordliste}
%\input{../ipv6-reference/wordlist.dk.tex}


%\chapter{Sikkerhed}

%N�r man aktiverer \emne �bner man mange muligheder for angreb!

%Det vil ofte v�re muligt at skabe adgang til netv�rket for
%uvedkommende og det er derfor n�dvendigt med l�bende kontrol,
%overv�gning og udskiftning af hemmeligheder som kodeord.

%IPsec er et krav til alle IPv6 implementationer, s� man ved at man har
%muligheden for at kommunikere sikkert.

%Wireless teknologier og IPv6 er blot to emner der har indflydelse p�
%sikkerheden i dagens netv�rk - men ofte kan det integreres fornuftigt
%med b�de virksomheden og de netv�rk som skal forbindes til
%infrastrukturen.

%Det anbefales at l�se bogen: \title{Firewalls and {Internet} Security:
%  Repelling the Wily Hacker}, \cite{Cheswick:2003:FIS}


\bibliographystyle{alpha}
%\bibliography{../ipv6-reference/security6-net.bib,../ipv6-reference/rfc.bib,../ipv6-reference/std.bib,../ipv6-reference/fyi.bib}
\bibliography{kramse.bib,rfc.bib,std.bib,fyi.bib}
%,internet.bib}

%\printindex

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
