\documentclass[20pt,landscape,a4paper,footrule]{foils}
\usepackage{zencurity-slides}

%\externaldocument{unix-audit-security-oevelser}
\externaldocument{\jobname-exercises}

% Kl 18 - 21

% Jul med Kramshøj - Netværkssikkerhed, gløgg og juleøl!

% Vi afholder julearrangement med fokus på netværkssikkerhed. Foredraget kommer til at indeholde uddrag fra pentest, hacking, historik og en hurtig gennemgang op til idag hvor vi har Metasploit og Armitage som state-of-the-art værktøjer. Vi bryder ind i computere og viser hvordan pentest værktøjer kan medvirke til både at spare tid og verificere opsætningen af netværksudstyr, som firewalls.

% Der vil være kort Kali introduktion, og ellers berøres følgende emner:


% * Portscanning med Nmap, IPv4 og IPv6

% * Script scanning med Nmap, eksempler som nmap -p 443 --script

% * ssl-heartbleed <target>

% * Hvor kommer det fra! Fra SATAN til Armitage og åbne exploit databaser i dag

% * Hvordan sikrer vi os bedst!? Henriks bud på sikring af hjem og firma,

%  hint: VLAN all teh things

% * Advarsel omkring hvordan vi sikrer os imod at komme i problemer, med ref til CSC hackersagen Og så kan vi passende henover gløgg og æbleskiver diskutere om sådanne værktøjer skal være frit tilgængelige!



% Basic things that we need are below
\begin{document}
\selectlanguage{danish}

\mytitlepage{Netværkssikkerhed

 Jul med Kramshøj Hacking Seminar}


\slide{Formålet }

\vskip 2 cm

\hlkimage{5cm}{dont-panic.png}
\centerline{\color{titlecolor}\LARGE Don't Panic!}

\begin{list1}
\item pentest, hacking, historik og en hurtig gennemgang op til idag hvor vi har Metasploit og Armitage som state-of-the-art værktøjer
\item Vi bryder ind i computere og viser hvordan pentest værktøjer kan medvirke til både at spare tid og verificere opsætningen af netværksudstyr, som firewalls
\end{list1}

\vskip 1cm
\centerline{Jeg bruger Kali 2.0 Linux hackerplatformen som eksempel}


\slide{Metasploit and Armitage Still rocking the internet}

\hlkimage{14cm}{metasploit-about.png}

\begin{list1}
\item Udviklingsværktøjerne til exploits er i dag meget raffinerede!
\item \link{http://www.metasploit.com/}
\item Armitage GUI fast and easy hacking for Metasploit\\
\link{http://www.fastandeasyhacking.com/}
\item Kursus Metasploit Unleashed\\
\link{http://www.offensive-security.com/metasploit-unleashed/Main_Page}
\item Bog: Metasploit: The Penetration Tester's Guide, No Starch Press\\
ISBN-10: 159327288X
\end{list1}

\slide{Demo: Metasploit Armitage }

\hlkimage{16cm}{armitage-overview.png}

\slide{Agenda}

\begin{list1}
\item Hvor kommer det fra! Fra SATAN til Armitage og åbne exploit databaser i dag

\item Kali introduktion

\item Portscanning med Nmap, IPv4 og IPv6

\item Script scanning med Nmap, eksempler som\\
\verb+nmap -p 443 --script ssl-heartbleed <target>+

\item Hvordan sikrer vi os bedst!? Henriks bud på sikring af hjem og firma

\end{list1}

\vskip 2cm

\centerline{Forventer løst format, afslappet, spørgsmål og afstikkere \smiley}

\slide{Aftale om test af netværk}

{\bfseries Straffelovens paragraf 263 Stk. 2. Med bøde eller fængsel
  indtil 6 måneder
straffes den, som uberettiget skaffer sig adgang til en andens
oplysninger eller programmer, der er bestemt til at bruges i et anlæg
til elektronisk databehandling.}

Hacking kan betyde:
\begin{list2}
\item At man skal betale erstatning til personer eller virksomheder
\item At man får konfiskeret sit udstyr af politiet
\item At man, hvis man er over 15 år og bliver dømt for hacking, kan
  få en bøde - eller fængselsstraf i alvorlige tilfælde
\item At man, hvis man er over 15 år og bliver dømt for hacking, får
en plettet straffeattest. Det kan give problemer, hvis man skal finde
et job eller hvis man skal rejse til visse lande, fx USA og
Australien
\item Frit efter: \link{http://www.stophacking.dk} Det
  Kriminalpræventive Råd, siden er væk
\item Frygten for terror har forstærket ovenstående - så lad være!
\end{list2}


\slide{Internet idag}

\hlkimage{14cm}{images/server-client.pdf}

\begin{list1}
\item Klienter og servere
\item Rødder i akademiske miljøer
\item Protokoller hvor nogle er mere end 20 år gamle
\item Meget lidt kryptering, mest på http til brug ved e-handel
\end{list1}


\slide{Trinity breaking in}

\hlkimage{20cm}{trinity-nmapscreen-hd-cropscale-418x250.jpg}
\link{http://nmap.org/movies.html}\\
Meget realistisk \link{http://www.youtube.com/watch?v=51lGCTgqE_w}


\slide{Hackerværktøjer}

\begin{list1}
\item \emph{Improving the Security of Your Site by Breaking Into it} af
Dan Farmer og Wietse Venema i 1993
\item De udgav i 1995 så en softwarepakke med navnet SATAN
\emph{Security Administrator Tool for Analyzing Networks}
\item De forårsagede en del panik og furore, alle kan hacke, verden bryder sammen

\vskip 1cm
\begin{quote}
We realize that SATAN is a two-edged sword -- like
many tools, it can be used for good and for evil
purposes. We also realize that intruders (including
wannabees) have much more capable (read intrusive)
tools than offered with SATAN.
\end{quote}
\end{list1}

\vskip 1cm
Kilde:
\link{http://www.fish2.com/security/admin-guide-to-cracking.html}



\slide{Hackerværktøjer}
\hlkimage{3cm}{hackers_JOLIE+1995.jpg}

\begin{list2}
\item Nmap, Nping - tester porte, godt til firewall admins \link{http://nmap.org}
\item Metasploit Framework gratis på \link{http://www.metasploit.com/}
\item Wireshark avanceret netværkssniffer - \link{http://http://www.wireshark.org/}
\item Burpsuite \link{http://portswigger.net/burp/}
\item OpenBSD operativsystem med fokus
  på sikkerhed  \link{http://www.openbsd.org}
\end{list2}

Kilde: billedet er Angelina Jolie fra Hackers 1995

\centerline{Kræver en mere struktureret tilgang end de viser på film \smiley}



\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}


\slide{The Internet Worm 2. nov 1988}

\begin{list1}
\item Udnyttede følgende sårbarheder
\begin{list2}
\item buffer overflow i fingerd - VAX kode, Sendmail - DEBUG, Tillid mellem systemer: rsh, rexec, ...
\item dårlige passwords
\end{list2}
\item Avanceret + camouflage!
\begin{list2}
\item Programnavnet sat til 'sh', Brugte fork() til at skifte PID jævnligt
\item Fandt systemer i /etc/hosts.equiv, .rhosts, .forward, netstat ...
\item Password cracking med intern liste med 432 ord og /usr/dict/words
\end{list2}
\item Lavet af Robert T. Morris, Jr.
\item Medførte dannelsen af CERT, \link{http://www.cert.org}
\end{list1}

\centerline{1980'erne - det er vel fixet så?}


\slide{2016 botnets Internet of things (IoT)}

\begin{quote}
  This is bad news for cybersecurity as the IoT devices market heats up as people buy into the smart, automated systems. Gartner Inc. projects connected devices to rise to 6.4 billion worldwide in 2016 with almost 5.5 million devices being connected daily.
\end{quote}

\begin{list1}
\item 2016: Mirai Botnet Internet of things (IoT), 60 common factory default usernames and passwords\\
"Mirai was used in the DDoS attack on 20 September 2016 on the Krebs on Security site which reached 620 Gbps."

\item 2016: Currently, “Bashlight” is creating an army of a million IoT devices.\\
Eeen million enheder!

\end{list1}

Sources: \link{https://en.wikipedia.org/wiki/Mirai_(malware)}\\
{\footnotesize\link{http://heavy.com/tech/2016/10/mirai-iot-botnet-internet-of-things-ddos-attacks-internet-outage-blackout-why-is-internet-down/}}


\slide{Security Breaches: Ashley Madison}


\begin{quote}
When hackers swiped an estimated 36 million accounts associated with AshleyMadison.com, a site which helps married people cheat on their partners, there was a rush to find out what had been stolen.
\end{quote}


\begin{list2}
\item Ashley Madison, inkl password hacking
\item Popular passwords
123456,
,password
,12345
,qwerty
,12345678,football
\item Also hacking kills? Suicides and family break-ups?
\item accidental outing of gays/ Gay persecution, death?
\end{list2}

Source:\\
{\footnotesize\link{http://www.zdnet.com/article/these-are-the-worst-passwords-from-the-ashley-madison-hack/}}

\slide{Security Breaches: Top 20 Ashley Madison Passwords}

\begin{quote}
Previously thought to be impossible thanks to the slow pace and high stress it puts on a computer's CPU, the CynoSure Prime group managed to crack over 11 million passwords from the total of 36 million, mainly due to a programming error in how the passwords were hashed.
\end{quote}


\begin{list2}
\item Main passwords hashed with slow (good) bcrypt  algoritm, but hackers found tokens hashed with MD5\\
\link{http://cynosureprime.blogspot.dk/2015/09/how-we-cracked-millions-of-ashley.html}
\item Also check out Twitter Mark Burnett @m8urnett and his 10 million password dump\\
\link{http://wpengine.com/unmasked/}
\item Systems exist which can try 135 billion MD5 hashes PER SECOND with 8 GPUs
\end{list2}

Source: Catalin Cimpanu, Softpedia 15 September 2015\\
{\footnotesize\link{http://news.softpedia.com/news/top-20-ashely-madison-passwords-491799.shtml}}


\slide{Release of vuln information without patch}

\begin{list1}
\item Google project Zero
\item Follow a
"90-day disclosure deadline statement... which in this instance has passed."
\item Released Zero-day information about Microsoft and Apple OS X vulnerabilities
\item MS patched some in \emph{first Patch Tuesday of 2015, which came out on Jan. 13.}
\end{list1}

Sources:\\
{\tiny
\link{http://googleonlinesecurity.blogspot.fr/2014/07/announcing-project-zero.html}\\
\link{http://searchsecurity.techtarget.com/news/2240238448/Googles-Project-Zero-reveals-another-Windows-zero-day-vulnerability}\\
\link{http://www.engadget.com/2015/01/02/google-posts-unpatched-microsoft-bug/}\\
\link{http://www.eweek.com/security/google-project-zero-continues-its-microsoft-zero-day-assault.html}\\
\link{http://www.zdnet.com/article/googles-project-zero-reveals-three-apple-os-x-zero-day-vulnerabilities/}
}

Trend with more vulnerabilities per day, and\\
even big vendors cannot react quickly enough


\slide{Samba remote code execution}


\begin{alltt}\small
  ===========================================================
  == Subject:     Unexpected code execution in smbd.
  ==
  == CVE ID#:     CVE-2015-0240
  ==
  == Versions:    Samba 3.5.0 to 4.2.0rc4
  ==
  == Summary:     Unauthenticated code execution attack on
  ==		smbd file services.
  ==
  ===========================================================
\end{alltt}

\centerline{Great, even our old tools still has multiple bugs}

Source:\\
\link{https://www.samba.org/samba/security/CVE-2015-0240}




\slide{Sceneskift - Hacking er magi}

\hlkimage{7cm}{wizard_in_blue_hat.png}

\vskip 1 cm

\centerline{Hacking ligner indimellem  magi}


\slide{Hacking er ikke magi}

\hlkimage{17cm}{ninjas.png}

\vskip 1 cm
\centerline{Hacking kræver blot lidt ninja-træning}



\slide{Movie:Kryptonite lock - old}

\hlkimage{16cm}{youtube-bic-lock.png}

\begin{list1}
\item Just search for: kryptonite lock bic pen
\item \link{https://www.youtube.com/watch?v=LahDQ2ZQ3e0}
\end{list1}


\slide{Teknisk hvad er hacking}

\hlkimage{17cm}{buffer-overflow-3.pdf}

\slide{Hacking eksempel - det er ikke magi}

\begin{list1}
\item MAC filtrering på trådløse netværk
\item Alle netkort har en MAC adresse - BRÆNDT ind i kortet fra fabrikken
\item Mange trådløse Access Points kan filtrere MAC adresser
\item Kun kort som er på listen over godkendte adresser tillades adgang til netværket
\pause
\item Det virker dog ikke \smiley
\item De fleste netkort tillader at man overskriver denne adresse midlertidigt
\item Derudover har der ofte været fejl i implementeringen af MAC filtrering
\end{list1}


\slide{MAC filtrering}

\hlkimage{15cm}{stupid-security.jpg}


\slide{Buffer overflows et C problem}

\begin{list1}
\item {\bfseries Et buffer overflow}
er det der sker når man skriver flere data end der er afsat plads til
i en buffer, et dataområde. Typisk vil programmet gå ned, men i visse
tilfælde kan en angriber overskrive returadresser for funktionskald og
overtage kontrollen.
\item {\bfseries Stack protection}
er et udtryk for de systemer der ved hjælp af operativsystemer,
programbiblioteker og lign. beskytter stakken med returadresser og
andre variable mod overskrivning gennem buffer overflows. StackGuard
og Propolice er nogle af de mest kendte.
\end{list1}

\slide{Buffer og stacks}

\hlkimage{20cm}{buffer-overflow-1.pdf}

\begin{alltt}
main(int argc, char **argv)
\{      char buf[200];
        strcpy(buf, argv[1]);
        printf("%s\textbackslash{}n",buf);
\}
\end{alltt}


\slide{Overflow -- segmentation fault}

\hlkimage{20cm}{buffer-overflow-2.pdf}


\begin{list1}
\item Bad function overwrites return value!
\item Control return address
\item Run shellcode from buffer, or from other place
\end{list1}


\slide{Exploits -- udnyttelse af sårbarheder}

\begin{list2}
\item Exploit/exploitprogram er udnytter en sårbarhed rettet mod et specifikt system.
\item Kan være 5 linier eller flere sider ofte Perl, Python eller et C program
\end{list2}

Eksempel demo i Perl, uddrag:
\begin{alltt}\footnotesize
$buffer = "";
$null = "\textbackslash{}x00";
$nop = "\textbackslash{}x90";

$nopsize = 1;
$len = 201; // what is needed to overflow, maybe 201, maybe more!
$the_shell_pointer = 0x01101d48; // address where shellcode is
# Fill buffer
for ($i = 1; $i < $len;$i += $nopsize) \{
    $buffer .= $nop;
\}
$address = pack('l', $the_shell_pointer);
$buffer .= $address;
exec "$program", "$buffer";
\end{alltt}


\slide{Hvordan finder man buffer overflow, og andre fejl}

\begin{list1}
\item Black box testing
\item Closed source reverse engineering
\item White box testing
\item Open source betyder man kan læse og analysere koden
\item Source code review -- automatisk eller manuelt
\item Fejl kan findes ved at prøve sig frem -- fuzzing
\item Exploits virker typisk mod specifikke versioner af software
\end{list1}

\slide{Hvad skal der ske?}

\begin{list1}
\item Tænk som en hacker
\item Rekognoscering
\begin{list2}
\item ping sweep, port scan
\item OS detection -- TCP/IP eller banner grab
\item Servicescan -- rpcinfo, netbios, ...
\item telnet/netcat interaktion med services
\end{list2}
\item Udnyttelse/afprøvning: Metasploit, Nikto, exploit programs
\item Oprydning/hærdning vises måske ikke, men I bør i praksis:
\begin{list2}
\item Lav en rapport
\item Ændre, forbedre og hærde systemer
\item Gennemgå rapporten, registrer ændringer
\item Opdater programmer, konfigurationer, arkitektur, osv.
\end{list2}
\item I skal jo også VISE andre at I gør noget ved sikkerheden.
\end{list1}

\slide{Hackerlab opsætning}

\hlkimage{10cm}{hacklab-1.png}

\begin{list2}
\item Tænk som en hacker, rekognoscering, angreb, udnyt
\item Hardware: en moderne laptop med CPU der kan bruge virtualiseting\\
Husk at slå virtualisering til i BIOS
\item Software: Windows, Mac, Linux og virtualiseringssoftware: VMware, Virtual box, vælg selv
\item Hackersoftware: Kali Linux som en virtuel maskine
\item Soft targets: Metasploitable, Windows 2000, Windows Xp, ...
\end{list2}


\slide{Hackerværktøjer}
% måske til reference afsnit?
\hlkimage{3cm}{hackers_JOLIE+1995.jpg}

\begin{list2}
\item Alle bruger nogenlunde de samme værktøjer, se også \link{http://www.sectools.org/}
\item Portscanner Nmap, Nping -- tester porte, godt til firewall admins \link{https://nmap.org}
\item Generel sårbarhedsscanner Metasploit Framework \link{https://www.metasploit.com/}
\item Specialscannere, eksempelvis web sårbarhedsscanner -- eksempelvis Burp, Nikto, Skipfish
\item Specielle scannere -- wifi Aircrack-ng, web Burpsuite \link{http://portswigger.net/burp/}
\item Wireshark avanceret netværkssniffer -- \link{https://www.wireshark.org/}
\item og scripting, PowerShell, Unix shell, Perl, Python, Ruby, \ldots
\end{list2}

Billedet: Angelina Jolie fra Hackers 1995



\slide{Kali Linux the new backtrack}

\hlkimage{10cm}{kali-linux.png}

\begin{list1}
%\item BackTrack -- \link{http://www.backtrack-linux.org}
\item Kali -- \link{https://www.kali.org/} - den man bruger idag
\item Wireshark -- \link{https://www.wireshark.org} avanceret netværkssniffer
\item Meget nemt at starte med, og kommer nemt igang med mange tools
\item Brug hjemmesiderne for tools til tutorials og videoer
\item \verb+youtube.com: kali hack > 200.000 hits+
\item Start evt med de mest populære fra \link{http://sectools.org/}
\end{list1}



\slide{OSI og Internet modellerne}

\hlkimage{14cm,angle=90}{images/compare-osi-ip.pdf}


\slide{Wireshark - grafisk pakkesniffer}

\hlkimage{20cm}{images/wireshark-website.png}

\centerline{\link{http://www.wireshark.org}}
\vskip 5mm
\centerline{både til Windows og UNIX}

\slide{Wireshark usage}
\hlkimage{16cm}{wireshark-http.png}

Wireshark: Filters, hexdump, protocol dissection, overview, coloring, advanced features

\demo{Wireshark}

\slide{The Exploit Database -- dagens buffer overflow}

\hlkimage{20cm}{exploit-db.png}

\centerline{\link{http://www.exploit-db.com/}}

\slide{Heartbleed CVE-2014-0160}

\hlkimage{22cm}{heartbleed-com.png}

Source: \link{http://heartbleed.com/}


\slide{Heartbleed hacking}

\begin{alltt}\footnotesize
  06b0: 2D 63 61 63 68 65 0D 0A 43 61 63 68 65 2D 43 6F  -cache..Cache-Co
  06c0: 6E 74 72 6F 6C 3A 20 6E 6F 2D 63 61 63 68 65 0D  ntrol: no-cache.
  06d0: 0A 0D 0A 61 63 74 69 6F 6E 3D 67 63 5F 69 6E 73  ...action=gc_ins
  06e0: 65 72 74 5F 6F 72 64 65 72 26 62 69 6C 6C 6E 6F  ert_order&billno
  06f0: 3D 50 5A 4B 31 31 30 31 26 70 61 79 6D 65 6E 74  =PZK1101&payment
  0700: 5F 69 64 3D 31 26 63 61 72 64 5F 6E 75 6D 62 65  _id=1&{\bf card_numbe}
  0710: XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX  {\bf r=4060xxxx413xxx}
  0720: 39 36 26 63 61 72 64 5F 65 78 70 5F 6D 6F 6E 74  {\bf 96&card_exp_mont}
  0730: 68 3D 30 32 26 63 61 72 64 5F 65 78 70 5F 79 65  {\bf h=02&card_exp_ye}
  0740: 61 72 3D 31 37 26 63 61 72 64 5F 63 76 6E 3D 31  {\bf ar=17&card_cvn=1}
  0750: 30 39 F8 6C 1B E5 72 CA 61 4D 06 4E B3 54 BC DA  {\bf 09}.l..r.aM.N.T..
\end{alltt}

\begin{list2}
\item Obtained using Heartbleed proof of concepts - Gave full credit card details
\item "can XXX be exploited" - yes, clearly! PoCs ARE needed\\
without PoCs even Akamai wouldn't have repaired completely!
\item \link{https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/ssl/openssl_heartbleed.rb}
\end{list2}



\slide{Network mapping}

\hlkimage{23cm}{images/network-example.pdf}

\begin{list1}
\item Ved brug af traceroute og tilsvarende programmer kan man ofte
  udlede topologien i det netværk man undersøger
\end{list1}


\slide{Portscan med Zenmap GUI}

\hlkimage{16cm}{nmap-zenmap.png}

\slide{Scan for Heartbleed and SSLv2/SSLv3}

\hlkimage{8cm}{nmap-sslv2.png}

\begin{list1}
\item \verb+nmap -p 443 --script ssl-heartbleed <target>+\\
\link{https://nmap.org/nsedoc/scripts/ssl-heartbleed.html}
\item \verb+masscan 0.0.0.0/0 -p0-65535  --heartbleed+\\
\link{https://github.com/robertdavidgraham/masscan}
\end{list1}

\centerline{Almost every new vulnerability will have Nmap recipe}


\slide{Hjemmearbejde: Kali øvelser}

Prøv selv at gentage det jeg viste hjemme
\begin{list2}
\item Wireshark
\item Wireshark med FTP
\item Nmap med Zenmap, script scan
\item Armitage og Metasploit, husk \verb+service postgresql start+
\item WEP/WPA cracking
\end{list2}

\slide{Beskyt dig selv, og dit netværk}

Nu skifter vi over til at beskytte os selv!

\slide{DNS attacks, February 2015 - ongoing for +10 years!}

\hlkimage{15cm}{krebs-lenovo-google-dns-hack.png}
\begin{list1}
%\item DNS is the Domain Name System, \link{https://en.wikipedia.org/wiki/Dns}
\item DNS insecurity has huge impact on your security!
\item Most are denial of service, by may create Mitm or confidentiality concerns
\item Select DNS providers with care
\end{list1}


Sources:\\
{\tiny
\link{https://krebsonsecurity.com/2015/02/webnic-registrar-blamed-for-hijack-of-lenovo-google-domains/}\\
\link{http://www.version2.dk/artikel/google-og-lenovo-defaced-som-foelge-af-overset-sikkerhedsproblemstilling-91295}}



\slide{Example, Using tools similar to PacketQ}

\hlkimage{20cm}{using-packetq.png}

Are you using your brain and existing tools? Building own specialised tools?\\
Discussion: bridging the gaps between Devops and Security? Good thing, easy?

{\footnotesize
\link{http://securityblog.switch.ch/2013/01/22/using-packetq/}\\
\link{http://jpmens.net/2013/05/27/server-agnostic-logging-of-dns-queries-responses/}
}

\slide{Storing query logs, old school or needed?}

\hlkimage{7cm}{bro-sample-ssl-scripts.png}

Looking at DNS PacketQ it was an Older link, but thinking the time is now for doing:

\begin{list2}
\item DNS query logs, keep it for at least a week? - with DSC and PacketQ
\item SSL/TLS full logs over sessions, certs, keys - with Bro/Suricata\\
\link{https://www.zeek.org/sphinx-git/script-reference/scripts.html}
\item Log and search with Elasticsearch?\\
\link{https://www.elastic.co/guide/en/elasticsearch/guide/current/index.html}
\item Even netflow session logging, full 1:1 - NFSen, Suricata Flow mode?
%\item Moloch \link{https://github.com/aol/moloch}
\end{list2}

%\centerline{Why go to this extreme, storing information about past sessions?}

\slide{February 2015: Finding infected sources}

\begin{quote}
"We were contacted by a client to help with their incident response in tracking down an
infection on a clients machine with the new CTB-Locker ransomware (Curve-Tor-Bitcoin Locker)
aka Critroni which had no signatures available at the time of infection for this variant.

LANGuardian includes a file share activity monitoring module which provided a very
detailed forensic analysis of the ransomware and the paths it had taken in order to
encrypt the clients system and also the fileserver in which it was connected to, the
initial infection came from the opening of an attachment in an e-mail."
\end{quote}

\vskip 1cm

\centerline{It has become critical to identify vulnerable or infected ASAP!}

Source:
{\tiny\link{https://www.netfort.com/support-team-stories-detecting-the-source-of-ransomware/}}

Dont forget Suricata \link{http://suricata-ids.org/} and Security Onion\\ {\small\link{https://github.com/Security-Onion-Solutions/security-onion/wiki/Installation}}

\slide{Kibana 4}

\hlkimage{14cm}{kibanascreenshothomepagebannerbigger.jpg}

\centerline{Highly recommended for a lot of data visualisation}

Non-programmers can create, save, and share dashboards

Source:
\link{https://www.elastic.co/products/kibana}



\slide{Brug hackerværktøjer!}

\hlkimage{12cm}{nfsen-udp-flood.png}

\centerline{An extra 100k packets per second from this netflow source (source is a router)}

\begin{list1}
\item Hackerværktøjer -- bruger I dem? -- efter dette kursus gør I
\item Portscannere kan afsløre huller i forsvaret
\item I vil kunne finde mange potentielle problemer proaktivt ved
  regelmæssig brug
\end{list1}

\centerline{Værktøjerne er på Kali Linux allerede}

\slide{Detecting DDoS example tool Nfsen}

\hlkimage{15cm}{nfsen-ddos-profile-1.png}

We created a DDoS profile with the common types.

We can ask RRDtools about max, average etc.
\begin{alltt}\small
rrdtool graph x -s -24h DEF:v=DDoS/mx-cph-01.rrd:packets:MAX
VDEF:vm=v,MAXIMUM PRINT:vm:%.lf
\end{alltt}




\slide{DDoS traffic before filtering}
\hlkimage{26cm}{ddos-before-filtering}

\centerline{Only two links shown, at least 3Gbit incoming for this single IP}

\slide{DDoS traffic after filtering}
\hlkimage{18cm}{ddos-after-filtering}
\centerline{Link toward server (next level firewall actually) about ~350Mbit outgoing}

\begin{list1}
\item Problem: We receive unauthenticated chaotic traffic

\item Solution: Discard early, discard on edge, reduce noise

\item Only use CPU resources for potentially real traffic
\end{list1}

\centerline{Single firewall layer typically cannot cope!}

\slide{Defense in depth - multiple layers of security}

\hlkimage{20cm}{network-layers-1.pdf}

% 802.1q
\slide{VLAN Virtual LAN}

\hlkimage{10cm}{vlan-portbased.pdf}

\begin{list1}
\item Nogle switche tillader at man opdeler portene
\item Denne opdeling kaldes VLAN og portbaseret er det mest simple
\item Port 1-4 er et LAN
\item De resterende er et andet LAN
\item Data skal omkring en firewall eller en router for at krydse fra VLAN1 til VLAN2
\end{list1}

\slide{IEEE 802.1q}

\hlkimage{19cm}{vlan-8021q.pdf}

\begin{list1}
\item Nogle switche tillader konfiguration med 802.1q VLAN tagging på Ethernet niveau
\item Data skal omkring en firewall eller en router for at krydse fra VLAN1 til VLAN2
\item VLAN trunking giver mulighed for at dele VLANs ud på flere switches
\end{list1}

\slide{Sample switch - less than 100 EUR ex VAT}

\hlkimage{18cm}{TP-link-SG3210.png}

\begin{list1}
\item Understøtter VLANs 802.1q
\item Port isolation, med forwarding list
\item IP ACLs!
\item SNMP, SSH
\end{list1}

\centerline{\bf This is JUST AN EXAMPLE, research and select switches yourself}

\slide{Port isolation}

\hlkimage{16cm}{port-isolation.png}

No subnetting, but individual ports cannot talk

Easier than subnetting and VLANs?  Quick and dirty? \smiley

\slide{VLANs i hjemmet }

Jeg arbejder selv med en ide om at lave VLANs i hjemmet til diverse “funktioner”
\begin{list1}

\item media-vlan til chromecast og underholdning osv.

\item game-vlan til den ene teenagedreng

\item husets-vlan til automatisering, køleskabe osv.

\item lab-vlan1,2,3 - jeg laver altid diverse ting :-D

\item Guest-VLAN - gæsterne skal da isoleres
\end{list1}

\vskip 2cm

\centerline{Hvilke mangler jeg?}





\slide{Security devops}

\begin{list1}
\item We need devops skillz in security
\item automate, security is also big data
\item integrate tools, transfer, sort, search, pattern matching, statistics, ...
\item tools, languages, databases, protocols, data formats
\item Example introductions:
\begin{list2}
\item Seven languages/database/web frameworks in Seven Weeks
\item Elasticsearch the definitive guide\\
\link{http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/index.html}
\item \link{http://www.elasticsearch.org/overview/kibana/}
\item \link{http://www.elasticsearch.org/overview/logstash/}
\end{list2}
\end{list1}

\centerline{We are all Devops now, even security people!}


\slide{Recommended Books: Get Started }


\begin{list1}


\item \emph{24 Deadly Sins of Software Security}
Michael Howard, David LeBlanc, John Viega 2. udgave, første hed 19 Deadly Sins
\hlkimage{3cm}{24-deadly.jpg}

\item \emph{Network Security Through Data Analysis: Building Situational Awareness}\\
By Michael Collins, O'Reilly Media, February 2014 Pages: 348
Low page count, but high value! Recommended.
\hlkimage{3cm}{network-security-through-data-analysis.png}
\end{list1}


\slide{Join Camps}

\hlkimage{14cm}{Chaos_Communication_Camp_2015_with_Thunderstorm.jpg}
\centerline{\bf Chaos Communication Camp 2015 It was Awesome!}

{\small Source Wikipedia and \link{https://www.flickr.com/photos/schwarzbrot/20447504269/}}\\
Bornhack 2016 \link{https://www.instagram.com/bornhax/}\\
Reserver 22. - 29. August 2017! \link{https://bornhack.dk/}



\slide{Focus for the near future}

\begin{list2}
\item Walk through your infrastructure\\
get a detailed view of data, flows, protocols, bandwidth, ports and services

\item Automate pushing of updates for both clients and servers, goal update everything in hours
\item Learn to run Nmap and Metasploit scripts - identify vulnerable servers
\end{list2}

\vskip 2cm
\centerline{consider the fact we have multiple overlapping critical security incidents now!}

\vskip 2cm
How many incidents can your organisation handle in parallel?

Can multiple people in your organisation initate updates?


\myquestionspage

\end{document}
